<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Aneka Digital - Pusat Cetak Undangan, ID Card & Foto Murah | Market Printing Solution</title>
    
    <meta name="description" content="Platform digital printing modern anekamarket.my.id. Solusi cetak undangan pernikahan unik, ID Card PVC profesional, cetak foto berbagai ukuran.">
    <meta name="theme-color" content="#0A4D98">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <script src="https://unpkg.com/feather-icons"></script>
    
    <style>
        /* --- 1. CORE VARIABLES & RESET --- */
        :root {
            --primary: #0A4D98;
            --primary-dark: #06356b;
            --accent: #FF7F00;
            --accent-hover: #e67300;
            --text-dark: #1e293b;
            --text-gray: #64748b;
            --bg-light: #f1f5f9;
            --white: #FFFFFF;
            --success: #10b981;
            
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-card: 0 10px 30px -5px rgba(0,0,0,0.1);
            
            --radius-md: 12px;
            --radius-lg: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; }
        
        h1, h2, h3, h4, .logo, .font-head { font-family: 'Plus Jakarta Sans', sans-serif; }
        
        body { background-color: var(--bg-light); color: var(--text-dark); line-height: 1.6; overflow-x: hidden; }
        html { scroll-behavior: smooth; }

        .container { width: 90%; max-width: 1200px; margin: 0 auto; }
        .hidden { display: none !important; }

        /* --- 2. HEADER & NAVIGATION --- */
        header {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px);
            position: fixed; top: 0; width: 100%; z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05); padding: 0.8rem 0;
            transition: all 0.3s ease;
        }
        header.scrolled { padding: 0.6rem 0; box-shadow: var(--shadow-sm); }
        
        header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); text-decoration: none; display: flex; align-items: center; gap: 6px; letter-spacing: -0.5px; }
        .logo span { color: var(--accent); }
        
        nav ul { display: flex; gap: 2rem; list-style: none; align-items: center; }
        nav a { text-decoration: none; color: var(--text-dark); font-weight: 500; transition: 0.3s; font-size: 0.95rem; }
        nav a:hover { color: var(--primary); }
        
        .btn-nav { 
            background: var(--primary); color: white !important; padding: 10px 24px; 
            border-radius: 50px; box-shadow: 0 4px 12px rgba(10, 77, 152, 0.2);
        }
        .btn-nav:hover { background: var(--primary-dark); transform: translateY(-2px); }

        .btn-free-app {
            color: var(--success) !important; font-weight: 700;
            display: flex; align-items: center; gap: 6px;
            padding: 8px 16px; border: 1px dashed var(--success);
            border-radius: 8px; background: rgba(16, 185, 129, 0.08); transition: 0.3s;
        }
        
        .hamburger { display: none; cursor: pointer; font-size: 1.8rem; color: var(--text-dark); }

        /* --- 3. HERO SECTION --- */
        .hero {
            padding-top: 160px; padding-bottom: 80px;
            background: linear-gradient(180deg, #E0F2FE 0%, #FFFFFF 100%);
            border-bottom-left-radius: 60px; border-bottom-right-radius: 60px;
            position: relative; overflow: hidden;
        }

        .modern-badge {
            display: inline-flex; align-items: center; gap: 8px;
            background: white; color: var(--primary); 
            padding: 8px 20px; border-radius: 50px;
            font-size: 0.85rem; font-weight: 700; 
            box-shadow: var(--shadow-sm); margin-bottom: 1.5rem;
        }
        
        .hero-wrapper { display: flex; align-items: center; gap: 4rem; }
        .hero-text { flex: 1; }
        
        .hero-title {
            font-size: 3.2rem; line-height: 1.1; margin-bottom: 1.5rem; 
            color: var(--text-dark); font-weight: 800; letter-spacing: -1px;
        }
        .text-gradient {
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .hero-desc { font-size: 1.1rem; color: var(--text-gray); margin-bottom: 2.5rem; max-width: 95%; }

        .hero-btn-group { display: flex; gap: 15px; flex-wrap: wrap; }

        .btn-market {
            background: linear-gradient(135deg, var(--accent), #ff5722);
            color: white; padding: 14px 32px; border-radius: 10px;
            text-decoration: none; font-weight: 700; display: inline-flex; align-items: center; gap: 10px;
            transition: all 0.3s ease; box-shadow: 0 10px 20px rgba(255, 127, 0, 0.25);
            border: none; cursor: pointer;
        }
        .btn-market:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(255, 127, 0, 0.35); }

        .btn-secondary-outline {
            background: white; color: var(--primary); border: 2px solid #e2e8f0;
            padding: 12px 30px; border-radius: 10px; text-decoration: none; font-weight: 700;
            transition: 0.3s; display: flex; align-items: center;
        }
        .btn-secondary-outline:hover { border-color: var(--primary); background: #f0f9ff; }

        .hero-img { flex: 1; position: relative; }
        .hero-img img { width: 100%; border-radius: 24px; box-shadow: var(--shadow-card); animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-15px); } }

        /* --- 4. KATALOG PRODUK --- */
        .section-title { text-align: center; margin-bottom: 3.5rem; }
        .section-title h2 { font-size: 2.5rem; margin-bottom: 0.8rem; color: var(--text-dark); font-weight: 800; }
        .section-title p { color: var(--text-gray); font-size: 1.1rem; }

        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 2rem; }
        
        .product-card {
            background: var(--white); border-radius: var(--radius-md); overflow: hidden;
            box-shadow: var(--shadow-sm); transition: all 0.3s ease; border: 1px solid #f1f5f9;
            display: flex; flex-direction: column;
        }
        .product-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-card); border-color: #bfdbfe; }
        
        .card-img { height: 200px; background: #f1f5f9; overflow: hidden; position: relative; }
        .card-img img { width: 100%; height: 100%; object-fit: cover; transition: 0.6s; }
        .product-card:hover .card-img img { transform: scale(1.08); }
        
        .card-body { padding: 1.5rem; flex: 1; display: flex; flex-direction: column; }
        .card-cat { font-size: 0.75rem; color: var(--accent); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.5rem; }
        .card-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-dark); }
        .card-price { color: var(--primary); font-weight: 800; font-size: 1.2rem; margin-bottom: 1rem; }
        .card-btn { 
            margin-top: auto; width: 100%; padding: 12px; border-radius: 8px; 
            border: 1px solid var(--primary); color: var(--primary); background: transparent; 
            cursor: pointer; font-weight: 600; transition: 0.3s; 
        }
        .card-btn:hover { background: var(--primary); color: white; }

        /* --- 5. FORM PEMESANAN --- */
        #pesan { scroll-margin-top: 90px; }
        .order-layout { display: grid; grid-template-columns: 2fr 1.1fr; gap: 2.5rem; align-items: start; }
        
        .form-panel { 
            background: var(--white); padding: 2.5rem; border-radius: var(--radius-lg); 
            box-shadow: var(--shadow-sm); border: 1px solid #e2e8f0; 
        }
        
        .form-group { margin-bottom: 1.5rem; position: relative; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 0.6rem; font-size: 0.9rem; color: #334155; }
        
        .form-control {
            width: 100%; padding: 14px; border: 1px solid #cbd5e1; border-radius: 10px;
            font-size: 1rem; transition: 0.3s; background: #f8fafc; color: var(--text-dark);
        }
        .form-control:focus { 
            border-color: var(--primary); background: #fff; outline: none; 
            box-shadow: 0 0 0 4px rgba(10, 77, 152, 0.1); 
        }
        
        .sub-option-container {
            background: #eff6ff; border: 1px dashed #93c5fd;
            padding: 20px; border-radius: 10px; margin-bottom: 2rem;
            animation: fadeIn 0.4s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .summary-panel {
            background: var(--white); padding: 2rem; border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card); position: sticky; top: 100px;
            border: 1px solid #e2e8f0;
        }
        .summary-title { 
            font-weight: 700; border-bottom: 2px solid #f1f5f9; padding-bottom: 1rem; 
            margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem;
        }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 1rem; font-size: 0.95rem; color: var(--text-gray); }
        .summary-row span:last-child { font-weight: 600; color: var(--text-dark); }
        
        .summary-total { 
            display: flex; justify-content: space-between; margin-top: 1.5rem; padding-top: 1.5rem; 
            border-top: 2px dashed #cbd5e1; font-weight: 800; font-size: 1.4rem; color: var(--primary); 
        }
        
        .btn-checkout { 
            width: 100%; margin-top: 2rem; background: var(--accent); border: none; 
            color: white; padding: 16px; border-radius: 10px; font-weight: 700; font-size: 1.1rem; 
            cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(255, 127, 0, 0.3); 
        }
        .btn-checkout:hover { background: var(--accent-hover); transform: translateY(-2px); }

        .gps-btn { 
            position: absolute; right: 8px; top: 38px; background: var(--primary); 
            color: white; border: none; padding: 6px 12px; border-radius: 6px; 
            cursor: pointer; font-size: 0.8rem; font-weight: 600; z-index: 5;
        }
        
        /* NEW: Style untuk DP/QRIS Section */
        .inv-payment-qris {
            padding: 1.5rem;
            background: #f0f9ff; /* light blue */
            border-radius: 12px;
            margin-top: 25px;
            text-align: center;
            border: 2px solid var(--primary);
        }
        .inv-payment-qris h4 {
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 700;
        }
        .inv-qris-image {
            width: 200px; /* Adjust size as needed */
            height: auto;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            margin: 10px auto;
            display: block;
        }
        .inv-qris-nominal {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 10px;
        }
        .inv-qris-info {
            font-size: 0.85rem;
            color: #334155;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        .inv-confirmation-note {
            background: #fff7ed;
            color: #c2410c;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 500;
            border: 1px solid #fed7aa;
        }

        /* --- 6. INVOICE MODAL (UI SCREEN) --- */
        .modal-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%; 
            background: rgba(15, 23, 42, 0.8); z-index: 2000; 
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: 0.3s; backdrop-filter: blur(8px);
            padding: 1rem;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }

        /* Main Card Container */
        .invoice-card-wrapper {
            background: white;
            width: 100%;
            max-width: 450px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
            transform: scale(0.95) translateY(20px);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex; flex-direction: column;
            max-height: 90vh;
        }
        .modal-overlay.active .invoice-card-wrapper { transform: scale(1) translateY(0); }

        /* Premium Header */
        .inv-header {
            background: var(--primary);
            color: white;
            padding: 2rem 2rem 3rem 2rem;
            text-align: center;
            position: relative;
        }
        .inv-header h3 { margin: 0; font-size: 1.4rem; font-weight: 700; letter-spacing: 0.5px; }
        .inv-header p { opacity: 0.8; font-size: 0.9rem; margin-top: 5px; }
        .inv-logo-icon {
            background: rgba(255,255,255,0.15);
            width: 50px; height: 50px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 15px auto;
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Content Body */
        /* Fix #2: .inv-body sudah memiliki overflow-y: auto untuk scroll manual. */
        .inv-body {
            background: white;
            border-radius: 20px 20px 0 0;
            margin-top: -20px;
            padding: 1.5rem;
            position: relative;
            overflow-y: auto; 
            flex-grow: 1;
        }

        /* Status Badge */
        .inv-badge {
            background: #fff7ed; color: #c2410c; border: 1px solid #ffedd5;
            padding: 8px 16px; border-radius: 50px;
            font-size: 0.8rem; font-weight: 700;
            text-align: center; width: fit-content; margin: 0 auto 20px auto;
            display: block; letter-spacing: 1px; text-transform: uppercase;
        }

        .inv-row {
            display: flex; justify-content: space-between; align-items: flex-start;
            margin-bottom: 14px; border-bottom: 1px solid #f1f5f9; padding-bottom: 14px;
        }
        .inv-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        
        .inv-label { font-size: 0.85rem; color: #64748b; font-weight: 500; }
        .inv-value { font-size: 0.95rem; color: #0f172a; font-weight: 600; text-align: right; max-width: 60%; }

        .inv-product-box {
            background: #f8fafc; border-radius: 12px; padding: 15px;
            margin: 10px 0 20px 0; border: 1px solid #e2e8f0;
        }
        .inv-product-title { color: var(--primary); font-weight: 700; margin-bottom: 5px; font-size: 1rem; }
        .inv-product-spec { font-size: 0.85rem; color: #64748b; line-height: 1.4; }

        .inv-total-area {
            background: #ecfeff; border: 1px dashed #22d3ee;
            border-radius: 12px; padding: 15px; margin-top: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .inv-total-label { color: #0891b2; font-weight: 600; font-size: 0.9rem; }
        .inv-total-value { color: var(--primary); font-weight: 800; font-size: 1.3rem; }

        .inv-footer {
            padding: 1.5rem; border-top: 1px solid #f1f5f9;
            display: flex; flex-direction: column; gap: 12px; background: white;
        }
        
        .btn-action-primary {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white; border: none; padding: 14px; border-radius: 12px;
            font-weight: 700; font-size: 1rem; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: 0.3s; box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
        }
        .btn-action-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4); }

        .btn-group-secondary { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        
        .btn-action-secondary {
            background: #f1f5f9; color: #475569; border: none; padding: 12px;
            border-radius: 10px; font-weight: 600; cursor: pointer; transition: 0.2s;
            font-size: 0.9rem;
        }
        .btn-action-secondary:hover { background: #e2e8f0; color: #1e293b; }

        /* --- 7. FOOTER --- */
        /* Perbaikan #3: Menghilangkan tumpang tindih warna di footer */
        .footer-wave { 
            width: 100%; line-height: 0; 
            background-color: var(--white); /* FIX: Ganti ke white agar transisi dari section #pesan (putih) mulus */ 
            margin-top: 3rem; 
        }
        .footer-wave svg { display: block; width: 100%; height: 80px; fill: #022a5c; } 
        
        footer { background: #022a5c; color: #e2e8f0; padding-bottom: 2rem; font-size: 0.95rem; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 3rem; padding: 3rem 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .footer-brand h3 { color: white; font-size: 1.8rem; margin-bottom: 1rem; }
        .footer-links a { color: #cbd5e1; text-decoration: none; transition: 0.3s; display: block; margin-bottom: 10px; }
        .footer-links a:hover { color: var(--accent); padding-left: 5px; }
        
        .whatsapp-float {
            position: fixed; bottom: 30px; right: 30px; background: #25D366; color: white; 
            width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; 
            justify-content: center; font-size: 30px; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4); 
            z-index: 999; transition: 0.3s; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); } 100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); } }

        /* --- 8. MEDIA QUERIES (RESPONSIVE FIXES) --- */
        @media (max-width: 900px) {
            .hero-wrapper { flex-direction: column-reverse; text-align: center; padding-top: 0; }
            .hero-title { font-size: 2.5rem; margin-bottom: 1rem; }
            .hero-img { width: 100%; max-width: 500px; margin: 0 auto; }
            .hero-btn-group { justify-content: center; }
            .order-layout { grid-template-columns: 1fr; gap: 1.5rem; }
            .summary-panel { position: relative; top: 0; order: 2; background: #f8fafc; border: 2px dashed #cbd5e1; box-shadow: none; }
            .form-panel { order: 1; padding: 1.5rem; }
        }

        @media (max-width: 768px) {
            .container { width: 92%; }
            .hamburger { display: block; }
            nav ul { 
                position: fixed; top: 60px; left: -100%; width: 100%; height: calc(100vh - 60px);
                background: white; flex-direction: column; padding: 2rem; 
                box-shadow: var(--shadow-card); transition: 0.4s; justify-content: flex-start;
            }
            nav ul.active { left: 0; }
            nav ul li { width: 100%; text-align: center; }
            nav a { display: block; padding: 12px; font-size: 1.1rem; }
            
            /* Mobile Invoice Fix */
            .invoice-card-wrapper { width: 95%; margin-top: 10px; }
            .inv-header { padding: 1.5rem 1.5rem 2.5rem 1.5rem; }
            .inv-body { padding: 1.2rem; }
            .btn-group-secondary { grid-template-columns: 1fr 1fr; } 
        }

        /* --- 9. PRINT STYLE --- */
        #print-container { display: none; }
        @media print { 
            /* Fix #1: Perbaikan potong di PDF */
            body { margin: 0; padding: 0; }
            body > * { display: none !important; }
            
            #print-container { 
                display: block !important; position: absolute; top: 0; left: 0; 
                width: 100%; min-height: 100vh; /* Pastikan minimal 100% tinggi viewport */
                padding: 0; margin: 0; background: white; color: black; 
            }
            #print-container * { visibility: visible; }
            
            /* Override margin untuk semua halaman cetak agar tidak ada pemotongan ganda */
            @page { margin: 10mm; }

            /* **FIX 2: Pencegahan Halaman Kosong/Terpotong** */
            .print-page, .print-page * { 
                box-shadow: none !important;
                text-shadow: none !important;
            }
            
            .print-page { 
                width: 100%; 
                max-width: 800px;
                margin: 0 auto;
                /* Pastikan konten tidak meluber ke halaman baru yang tidak perlu */
                page-break-after: avoid !important; 
            }
            
            .header-section, 
            .client-info-section, 
            .data-table, 
            .summary-section,
            .print-dp-payment {
                page-break-inside: avoid !important;
                page-break-after: auto; /* Bisa di-break setelah elemen ini jika perlu */
            }
            
            /* Memaksa elemen baris dalam tabel untuk tidak terpotong */
            .data-table tr {
                page-break-inside: avoid;
                page-break-after: auto;
            }
        }
    </style>
</head>
<body>

    <a href="https://wa.me/6285647709114" class="whatsapp-float" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
    </a>

    <header id="main-header">
        <div class="container">
            <a href="#" class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M6 9l6 6 6-6"/></svg>
                Aneka<span>Digital</span>
            </a>
            <div class="hamburger" id="hamburger">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </div>
            <nav>
                <ul id="nav-menu">
                    <li><a href="#hero">Beranda</a></li>
                    <li><a href="https://www.anekamarket.my.id" target="_blank" style="color: #FF4500; font-weight: 800;">Store <span style="background: red; color: white; font-size: 0.6rem; padding: 2px 6px; border-radius: 4px; vertical-align: top;">NEW</span></a></li>
                    <li><a href="#katalog">Katalog Produk</a></li>
                    <li><a href="https://anekamarket.my.id/beliaplikasi" target="_blank" class="btn-free-app">üéÅ Aplikasi Gratis</a></li>
                    <li><a href="#pesan" class="btn-nav">Buat Pesanan</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero" id="hero">
        <div class="container">
            <div class="hero-wrapper" data-aos="fade-up">
                <div class="hero-text" data-aos="fade-right">
                    <div class="modern-badge">üöÄ Marketplace & Printing Solution No. 1 Di Jawa Timur</div>
                    <h1 class="hero-title">Cetak Kebutuhanmu <br><span class="text-gradient">Semudah Belanja Online</span></h1>
                    <p class="hero-desc">Platform digital printing modern. Dari undangan mewah, ID Card profesional, hingga cetak foto. Pesan sekarang, pantau progress via WhatsApp.</p>
                    
                    <div class="hero-btn-group">
                        <a href="https://www.anekamarket.my.id" target="_blank" class="btn-market">
                            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            Kunjungi Official Store
                        </a>
                        <a href="#katalog" class="btn-secondary-outline">
                            Lihat Katalog Web ‚Üí
                        </a>
                    </div>
                </div>
                <div class="hero-img" data-aos="fade-left">
                    <img src="https://i.imgur.com/731UDrZ.jpeg" alt="Ilustrasi Cetak Undangan dan Foto Aneka Digital">
                </div>
            </div>
        </div>
    </section>

    <section id="katalog" style="padding: 4rem 0;">
        <div class="container">
            <div class="section-title" data-aos="fade-up">
                <h2>Pilih Produk Anda</h2>
                <p>Kualitas terbaik dengan harga transparan. Klik "Pesan" untuk memulai.</p>
            </div>
            <div class="product-grid">
                <div class="product-card" data-aos="fade-up" data-delay="100">
                    <div class="card-img"><img src="https://i.imgur.com/731UDrZ.jpeg" alt="Cetak Undangan"></div>
                    <div class="card-body">
                        <div class="card-cat">Best Seller</div>
                        <h3 class="card-title">Cetak Undangan</h3>
                        <div class="card-price">Mulai Rp 800 /pcs</div>
                        <p style="font-size:0.9rem; color:#666; margin-bottom:1rem;">Opsi Standart & Full Color. Tersedia berbagai tekstur.</p>
                        <button class="card-btn" onclick="selectProduct('undangan')">Pesan Sekarang</button>
                    </div>
                </div>
                <div class="product-card" data-aos="fade-up" data-delay="200">
                    <div class="card-img"><img src="https://i.imgur.com/AR44IdI.jpeg" alt="Cetak ID Card"></div>
                    <div class="card-body">
                        <div class="card-cat">Office</div>
                        <h3 class="card-title">ID Card PVC</h3>
                        <div class="card-price">Rp 10.000 /pcs</div>
                        <p style="font-size:0.9rem; color:#666; margin-bottom:1rem;">Bahan PVC tebal seperti ATM. Tersedia casing holder.</p>
                        <button class="card-btn" onclick="selectProduct('id-card')">Pesan Sekarang</button>
                    </div>
                </div>
                <div class="product-card" data-aos="fade-up" data-delay="300">
                    <div class="card-img"><img src="https://i.imgur.com/TbQQw3e.jpeg" alt="Cetak Foto"></div>
                    <div class="card-body">
                        <div class="card-cat">Studio</div>
                        <h3 class="card-title">Cetak Foto & Edit</h3>
                        <div class="card-price">Mulai Rp 250 /lbr</div>
                        <p style="font-size:0.9rem; color:#666; margin-bottom:1rem;">Berbagai ukuran (3x4 s/d A3). Opsi kertas Glossy/Tekstur.</p>
                        <button class="card-btn" onclick="selectProduct('cetak-foto')">Pesan Sekarang</button>
                    </div>
                </div>
                <div class="product-card" data-aos="fade-up" data-delay="400">
                    <div class="card-img"><img src="https://i.imgur.com/o1QY7Hj.jpeg" alt="Cetak Label CD"></div>
                    <div class="card-body">
                        <div class="card-cat">Custom</div>
                        <h3 class="card-title">Cetak Label CD/DVD</h3>
                        <div class="card-price">Mulai Rp 2.000 /lbr</div>
                        <p style="font-size:0.9rem; color:#666; margin-bottom:1rem;">Untuk kebutuhan profesional. Kualitas cetak anti air.</p>
                        <button class="card-btn" onclick="selectProduct('cetak-cd')">Pesan Sekarang</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="pesan" style="padding: 4rem 0; background: #fff;">
        <div class="container">
            <div class="section-title">
                <h2>Form Pemesanan Cerdas</h2>
                <p>Silakan lengkapi spesifikasi pesanan Anda di bawah ini.</p>
                <div style="background:#ecfdf5; color:#047857; display:inline-block; padding:8px 20px; border-radius:50px; font-size:0.9rem; font-weight:700; margin-top:15px; border:1px dashed #10b981;">‚ö†Ô∏è Semua harga sudah termasuk diskon volume otomatis.</div>
            </div>
            <form id="form-pemesanan">
                <div class="order-layout">
                    
                    <div class="form-panel">
                        <h3 style="margin-bottom: 1.5rem; color:var(--primary); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px;">Detail Pesanan</h3>

                        <div class="form-group">
                            <label for="jenis-produk">Pilih Jenis Produk</label>
                            <select id="jenis-produk" class="form-control" required onchange="handleProductChange(); updateCalculator()">
                                <option value="">--- Pilih Produk ---</option>
                                <option value="undangan">Cetak Undangan</option>
                                <option value="id-card">ID Card PVC</option>
                                <option value="cetak-foto">Cetak Foto & Edit</option>
                                <option value="cetak-cd">Cetak Label CD/DVD</option>
                            </select>
                        </div>
                        
                        <div id="form-undangan" class="hidden sub-option-container">
                            <h4 style="margin-bottom:15px; color:var(--text-dark); font-weight:700;">Opsi Undangan</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="form-group">
                                    <label>Tipe Undangan</label>
                                    <select id="undangan-tipe" class="form-control" onchange="updateCalculator()">
                                        <option value="800">Standart (Rp 800)</option>
                                        <option value="1200">Full Color (Rp 1.200)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Jenis Kertas</label>
                                    <select id="undangan-kertas" class="form-control" onchange="updateCalculator()">
                                        <option value="Jasmine">Jasmine (Tekstur)</option>
                                        <option value="Art Carton">Art Carton (Tebal)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div id="form-idcard" class="hidden sub-option-container">
                            <h4 style="margin-bottom:15px; color:var(--text-dark); font-weight:700;">Opsi ID Card</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="form-group">
                                    <label>Tipe ID Card</label>
                                    <select id="idcard-tipe" class="form-control" onchange="updateCalculator()">
                                        <option value="10000">Print 2 Sisi (Rp 10.000)</option>
                                        <option value="8000">Print 1 Sisi (Rp 8.000)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Holder/Casing</label>
                                    <select id="idcard-holder" class="form-control" onchange="updateCalculator()">
                                        <option value="0">Tanpa Holder (Rp 0)</option>
                                        <option value="3000">Holder Plastik (Rp 3.000)</option>
                                        <option value="5000">Holder Kulit Sintetis (Rp 5.000)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div id="form-cetak-foto" class="hidden sub-option-container">
                            <h4 style="margin-bottom:15px; color:var(--text-dark); font-weight:700;">Opsi Cetak Foto</h4>
                            <div class="form-group">
                                <label>Pilih Ukuran Foto</label>
                                <select id="foto-ukuran" class="form-control" onchange="updateCalculator()">
                                    <option value="250">3x4 / 4x6 (Rp 250)</option>
                                    <option value="500">5R (Rp 500)</option>
                                    <option value="1500">10R (Rp 1.500)</option>
                                    <option value="5000">A4 (Rp 5.000)</option>
                                    <option value="10000">A3 (Rp 10.000)</option>
                                </select>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="form-group">
                                    <label>Jenis Kertas</label>
                                    <select id="foto-kertas" class="form-control" onchange="updateCalculator()">
                                        <option value="Glossy">Glossy (Mengkilap)</option>
                                        <option value="Doff">Doff (Mate)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Jasa Edit</label>
                                    <select id="foto-edit" class="form-control" onchange="updateCalculator()">
                                        <option value="0">Tanpa Edit (Rp 0)</option>
                                        <option value="1000">Koreksi Warna/Wajah (Rp 1.000)</option>
                                        <option value="5000">Ganti Background (Rp 5.000)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div id="form-cetak-cd" class="hidden sub-option-container">
                            <h4 style="margin-bottom:15px; color:var(--text-dark); font-weight:700;">Opsi Cetak Label CD/DVD</h4>
                            <div class="form-group">
                                <label>Tipe Cetak</label>
                                <select id="cd-tipe" class="form-control" onchange="updateCalculator()">
                                    <option value="2000">Cetak Full Label (Rp 2.000)</option>
                                    <option value="3500">Cetak + Cutting Stiker (Rp 3.500)</option>
                                </select>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label for="qty">Kuantitas (Jumlah Pesanan)</label>
                                <input type="number" id="qty" class="form-control" value="1" min="1" required onchange="updateCalculator()" onkeyup="updateCalculator()">
                            </div>
                            <div class="form-group">
                                <label for="deadline">Kapan Anda Butuh Selesai?</label>
                                <input type="date" id="deadline" class="form-control" required>
                            </div>
                        </div>

                        <h3 style="margin-top: 3rem; margin-bottom: 1.5rem; color:var(--primary); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px;">Data Pemesan</h3>

                        <div class="form-group">
                            <label for="nama-pemesan">Nama Lengkap</label>
                            <input type="text" id="nama-pemesan" class="form-control" placeholder="Nama Anda" required>
                        </div>

                        <div class="form-group">
                            <label for="whatsapp">Nomor WhatsApp (Aktif)</label>
                            <input type="text" id="whatsapp" class="form-control" placeholder="Cth: 62856xxxxxxx" required>
                        </div>

                        <div id="event-details-section" class="hidden" style="margin-top: 3rem;">
                            <h3 style="margin-bottom: 1.5rem; color:var(--primary); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px;">Detail Acara (Khusus Undangan)</h3>
                            <div class="form-group">
                                <label for="jenis-acara">Jenis Acara</label>
                                <select id="jenis-acara" class="form-control" onchange="handleAcaraChange()">
                                    <option value="Pernikahan">Pernikahan / Wedding</option>
                                    <option value="Khitanan">Khitanan / Sunatan</option>
                                    <option value="Lainnya">Acara Lainnya</option>
                                </select>
                            </div>
                            <div id="detail-pernikahan">
                                <div class="form-group">
                                    <label for="nama-pria">Nama Mempelai Pria (Lengkap)</label>
                                    <input type="text" id="nama-pria" class="form-control" required placeholder="Cth: Ahmad bin Fulan">
                                </div>
                                <div class="form-group">
                                    <label for="nama-wanita">Nama Mempelai Wanita (Lengkap)</label>
                                    <input type="text" id="nama-wanita" class="form-control" required placeholder="Cth: Siti binti Fulanah">
                                </div>
                                <div class="form-group">
                                    <label for="nama-ortu">Nama Orang Tua (Pria & Wanita)</label>
                                    <input type="text" id="nama-ortu" class="form-control" required placeholder="Cth: Bpk. Fulan & Bpk. Fulanah">
                                </div>
                            </div>
                            <div id="detail-khitanan" class="hidden">
                                <div class="form-group">
                                    <label for="nama-anak">Nama Anak yang Dikhitan</label>
                                    <input type="text" id="nama-anak" class="form-control" placeholder="Cth: Muhammad Alif">
                                </div>
                            </div>
                             <div id="detail-lainnya" class="hidden">
                                <div class="form-group">
                                    <label for="judul-acara">Judul Acara</label>
                                    <input type="text" id="judul-acara" class="form-control" placeholder="Cth: Aqiqah / Tasyakuran">
                                </div>
                            </div>
                        </div>

                        <div class="form-group" style="margin-top: 3rem;">
                            <label for="catatan">Catatan Tambahan (Opsional)</label>
                            <textarea id="catatan" class="form-control" rows="3" placeholder="Contoh: Kirim sebelum tanggal 10"></textarea>
                        </div>
                    </div>

                    <div class="summary-panel">
                        <div class="summary-title">
                            <span>Ringkasan Biaya</span>
                            <span id="summary-product" style="font-size: 0.9rem; color: var(--accent); font-weight: 800;">-</span>
                        </div>

                        <div style="border-bottom: 1px solid #f1f5f9; padding-bottom: 10px; margin-bottom: 10px;">
                            <div class="summary-row">
                                <span>Harga Satuan</span>
                                <span id="summary-price">Rp 0</span>
                            </div>
                            <div class="summary-row">
                                <span>Kuantitas</span>
                                <span id="summary-qty">0</span>
                            </div>
                        </div>

                        <div style="padding-bottom: 10px;">
                            <div class="summary-row">
                                <span>Subtotal</span>
                                <span id="summary-subtotal">Rp 0</span>
                            </div>
                            <div class="summary-row" style="color: var(--accent);">
                                <span>Diskon Volume</span>
                                <span id="summary-discount">-Rp 0</span>
                            </div>
                        </div>
                        
                        <div class="summary-row" style="margin-top: 1rem; border-top: 1px solid #f1f5f9; padding-top: 1rem;">
                            <span style="font-weight: 700; color: var(--text-dark);">Uang Muka (DP 50%)</span>
                            <span style="font-weight: 700; color: var(--accent);" id="summary-dp">Rp 0</span>
                        </div>

                        <div class="summary-total" style="border-top: none; padding-top: 1rem;">
                            <span>TOTAL PESANAN</span>
                            <span id="total-display">Rp 0</span>
                        </div>

                        <button type="submit" class="btn-checkout" id="btn-checkout">Proses Pesanan ‚Üí</button>
                    </div>

                </div>
            </form>
        </div>
    </section>

    <div class="modal-overlay" id="invoice-modal-overlay">
        <div class="invoice-card-wrapper">
            <div class="inv-header">
                <div class="inv-logo-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M6 9l6 6 6-6"/></svg>
                </div>
                <h3>INVOICE PEMESANAN</h3>
                <p>Aneka Digital Market Printing Solution</p>
            </div>
            <div class="inv-body">
                <div class="inv-badge">Menunggu Pembayaran DP</div>

                <div class="inv-row">
                    <div class="inv-label">No. Invoice</div>
                    <div class="inv-value" id="inv-code" style="color: var(--primary);">#INV-000000</div>
                </div>
                <div class="inv-row">
                    <div class="inv-label">Tanggal</div>
                    <div class="inv-value" id="inv-date">-</div>
                </div>
                <div class="inv-row">
                    <div class="inv-label">Pemesan</div>
                    <div class="inv-value" id="inv-name">-</div>
                </div>

                <div class="inv-product-box">
                    <div class="inv-product-title" id="inv-product">-</div>
                    <div class="inv-product-spec" id="inv-specs">-</div>
                </div>

                <div class="inv-row">
                    <div class="inv-label">Harga x Qty</div>
                    <div class="inv-value"><span id="inv-price-unit">0</span> x <span id="inv-qty">0</span></div>
                </div>

                <div class="inv-row" id="modal-discount-row" style="display:none;">
                    <div class="inv-label" style="color: var(--accent);">Diskon</div>
                    <div class="inv-value" style="color: var(--accent);" id="inv-discount">-</div>
                </div>

                <div class="inv-total-area">
                    <div class="inv-total-label">TOTAL TAGIHAN (Penuh)</div>
                    <div class="inv-total-value" id="inv-total-final">Rp 0</div>
                </div>
                
                <p style="font-size: 0.85rem; color: #64748b; margin-top: 15px; border-top: 1px dashed #e2e8f0; padding-top: 10px;">
                    Catatan Tambahan: <span id="inv-notes-preview" style="font-weight: 600; color: #334155;">-</span>
                </p>

                <div id="dp-payment-section">
                    </div>

            </div>
            <div class="inv-footer">
                <button id="btn-wa-konfirmasi" class="btn-action-primary">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="white"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                    Konfirmasi Pembayaran DP Via WhatsApp
                </button>
                <div class="btn-group-secondary">
                    <button class="btn-action-secondary" id="btn-print-invoice">Cetak/Simpan PDF</button>
                    <button class="btn-action-secondary" onclick="closeModal()">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <div id="print-container"></div>
    
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
            <path fill="#022a5c" fill-opacity="1" d="M0,192L40,186.7C80,181,160,171,240,176C320,181,400,203,480,192C560,181,640,139,720,117.3C800,96,880,96,960,106.7C1040,117,1120,139,1200,149.3C1280,160,1360,160,1400,160L1440,160L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"></path>
        </svg>
    </div>
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>AnekaDigital</h3>
                    <p style="margin-bottom: 15px;">Market Printing Solution No. 1 di Jawa Timur. Solusi cetak cepat, mudah, dan terpercaya.</p>
                    <p style="font-weight: 600; color: white;">Hubungi Kami:</p>
                    <p>+62 856-4770-9114</p>
                </div>
                <div class="footer-links">
                    <h3 style="font-size: 1.2rem; color:white; margin-bottom: 1rem;">Navigasi Cepat</h3>
                    <a href="#hero">Beranda</a>
                    <a href="#katalog">Katalog Produk</a>
                    <a href="#pesan">Buat Pesanan</a>
                    <a href="https://www.anekamarket.my.id" target="_blank">Official Store</a>
                </div>
                <div class="footer-links">
                    <h3 style="font-size: 1.2rem; color:white; margin-bottom: 1rem;">Layanan & Info</h3>
                    <a href="#">Syarat & Ketentuan</a>
                    <a href="#">Kebijakan Privasi</a>
                    <a href="#">FAQ (Pertanyaan Umum)</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p style="text-align: center; font-size: 0.8rem; padding-top: 1.5rem; color: #a1a1aa;">&copy; 2024 Aneka Digital - All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
        feather.replace();

        // UTILITY FUNCTIONS
        function formatRupiah(number) {
            return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(number);
        }

        function generateInvoiceCode() {
            const today = new Date();
            const year = today.getFullYear().toString().slice(-2);
            const month = (today.getMonth() + 1).toString().padStart(2, '0');
            const day = today.getDate().toString().padStart(2, '0');
            // Generate simple unique ID (e.g., last 4 digits of timestamp)
            const uniqueId = Date.now().toString().slice(-4);
            return `AD${year}${month}${day}-${uniqueId}`;
        }

        // --- EVENT LISTENERS & HANDLERS ---

        // Sticky Header & Hamburger Menu
        document.addEventListener('DOMContentLoaded', () => {
            const header = document.getElementById('main-header');
            const navMenu = document.getElementById('nav-menu');
            const hamburger = document.getElementById('hamburger');

            // Set Initial Invoice Code
            document.getElementById('inv-code').textContent = "#" + generateInvoiceCode();

            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });

            hamburger.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        });

        // Update Invoice Code
        setInterval(() => {
            if (!document.getElementById('invoice-modal-overlay').classList.contains('active')) {
                document.getElementById('inv-code').textContent = "#" + generateInvoiceCode();
            }
        }, 60000); // Regenerate every minute if not in use


        // Catalog Button Select Product
        function selectProduct(productValue) {
            document.getElementById('jenis-produk').value = productValue;
            handleProductChange();
            updateCalculator();
            // Scroll to form
            document.getElementById('pesan').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Handle Event Details Visibility
        function handleAcaraChange() {
            const jenisAcara = document.getElementById('jenis-acara').value;
            document.getElementById('detail-pernikahan').classList.add('hidden');
            document.getElementById('detail-khitanan').classList.add('hidden');
            document.getElementById('detail-lainnya').classList.add('hidden');

            if (jenisAcara === 'Pernikahan') {
                document.getElementById('detail-pernikahan').classList.remove('hidden');
            } else if (jenisAcara === 'Khitanan') {
                document.getElementById('detail-khitanan').classList.remove('hidden');
            } else if (jenisAcara === 'Lainnya') {
                document.getElementById('detail-lainnya').classList.remove('hidden');
            }
        }


        // Handle Product Change Visibility
        function handleProductChange() {
            const produk = document.getElementById('jenis-produk').value;
            document.querySelectorAll('.sub-option-container').forEach(el => el.classList.add('hidden'));
            document.getElementById('event-details-section').classList.add('hidden');

            if (produk === 'undangan') {
                document.getElementById('form-undangan').classList.remove('hidden');
                document.getElementById('event-details-section').classList.remove('hidden');
                handleAcaraChange(); // Ensure event fields show
            } else if (produk === 'id-card') {
                document.getElementById('form-idcard').classList.remove('hidden');
            } else if (produk === 'cetak-foto') {
                document.getElementById('form-cetak-foto').classList.remove('hidden');
            } else if (produk === 'cetak-cd') {
                document.getElementById('form-cetak-cd').classList.remove('hidden');
            }
        }


        // CALCULATOR LOGIC
        function updateCalculator() {
            const produk = document.getElementById('jenis-produk').value;
            const qty = parseInt(document.getElementById('qty').value) || 0;
            let unitPrice = 0;
            let productText = '-';

            if (produk === 'undangan') {
                const tipeHarga = parseInt(document.getElementById('undangan-tipe').value);
                unitPrice = tipeHarga;
                productText = 'Cetak Undangan';
            } else if (produk === 'cetak-foto') {
                const fotoHarga = parseInt(document.getElementById('foto-ukuran').value);
                const editHarga = parseInt(document.getElementById('foto-edit').value);
                unitPrice = fotoHarga + editHarga;
                productText = 'Cetak Foto & Edit';
            } else if (produk === 'id-card') {
                const idCardHarga = parseInt(document.getElementById('idcard-tipe').value);
                const holderHarga = parseInt(document.getElementById('idcard-holder').value);
                unitPrice = idCardHarga + holderHarga;
                productText = 'ID Card PVC';
            } else if (produk === 'cetak-cd') {
                unitPrice = parseInt(document.getElementById('cd-tipe').value);
                productText = 'Cetak Label CD/DVD';
            } else {
                unitPrice = 0;
                productText = '-';
            }

            const subtotal = unitPrice * qty;

            // Diskon: Potongan 5rb setiap kelipatan 100rb
            let discountAmount = 0;
            if (subtotal >= 100000) {
                discountAmount = Math.floor(subtotal / 100000) * 5000;
            }

            const grandTotal = subtotal - discountAmount;

            // Calculate Down Payment (DP) - 50% of Grand Total, rounded up to prevent weird change due to rounding
            const dpAmount = Math.ceil(grandTotal / 2);

            // Update UI
            document.getElementById('summary-product').textContent = productText;
            document.getElementById('summary-price').textContent = unitPrice > 0 ? formatRupiah(unitPrice) : 'Chat Admin';
            document.getElementById('summary-qty').textContent = qty;
            document.getElementById('summary-subtotal').textContent = formatRupiah(subtotal);
            document.getElementById('summary-discount').textContent = "-" + formatRupiah(discountAmount);
            document.getElementById('summary-dp').textContent = formatRupiah(dpAmount);
            document.getElementById('total-display').textContent = formatRupiah(grandTotal);
        }

        // --- MODAL & INVOICE GENERATOR ---
        const form = document.getElementById('form-pemesanan');
        const modal = document.getElementById('invoice-modal-overlay');

        function closeModal() {
            modal.classList.remove('active');
        }

        // Fix #2: Fungsi untuk gulir otomatis sebagai petunjuk
        function animateScrollHint() {
            const invBody = document.querySelector('.inv-body');
            if (invBody.scrollHeight > invBody.clientHeight) {
                // Scroll down 50px
                invBody.scrollTo({ top: 50, behavior: 'smooth' });
                // Scroll back up after 800ms
                setTimeout(() => {
                    invBody.scrollTo({ top: 0, behavior: 'smooth' });
                }, 800);
            }
        }


        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Ambil data dari form
            const kode = document.getElementById('inv-code').textContent.replace('#', '');
            const nama = document.getElementById('nama-pemesan').value;
            const waRaw = document.getElementById('whatsapp').value;
            // Format WA: pastikan diawali 62 dan hapus awalan 0
            const wa = waRaw.startsWith('62') ? waRaw : '62' + waRaw.replace(/^0/, '');
            const qty = parseInt(document.getElementById('qty').value);
            const produk = document.getElementById('jenis-produk').value;
            const deadlineVal = document.getElementById('deadline').value;
            const noteRaw = document.getElementById('catatan').value;
            
            const today = new Date().toLocaleDateString('id-ID', { day: '2-digit', month: 'long', year: 'numeric' });

            // Variabel Harga dan Spesifikasi
            let unitPrice = 0;
            let productFullName = 'Custom / Other';
            let specText = "-";

            if (produk === 'undangan') {
                const tipeHarga = parseInt(document.getElementById('undangan-tipe').value);
                unitPrice = tipeHarga;
                productFullName = 'Cetak Undangan';
                specText = `Tipe: ${document.getElementById('undangan-tipe').options[document.getElementById('undangan-tipe').selectedIndex].text.split('(')[0].trim()}, Kertas: ${document.getElementById('undangan-kertas').value}`;
            } else if (produk === 'cetak-foto') {
                const fotoHarga = parseInt(document.getElementById('foto-ukuran').value);
                const editHarga = parseInt(document.getElementById('foto-edit').value);
                unitPrice = fotoHarga + editHarga;
                productFullName = 'Cetak Foto & Edit';
                specText = `Ukuran: ${document.getElementById('foto-ukuran').options[document.getElementById('foto-ukuran').selectedIndex].text.split('(')[0].trim()}, Kertas: ${document.getElementById('foto-kertas').value}, Edit: ${document.getElementById('foto-edit').options[document.getElementById('foto-edit').selectedIndex].text.split('(')[0].trim()}`;
            } else if (produk === 'id-card') {
                const idCardHarga = parseInt(document.getElementById('idcard-tipe').value);
                const holderHarga = parseInt(document.getElementById('idcard-holder').value);
                unitPrice = idCardHarga + holderHarga;
                productFullName = 'ID Card PVC';
                specText = `Tipe: ${document.getElementById('idcard-tipe').options[document.getElementById('idcard-tipe').selectedIndex].text.split('(')[0].trim()}, Holder: ${document.getElementById('idcard-holder').options[document.getElementById('idcard-holder').selectedIndex].text.split('(')[0].trim()}`;
            } else if (produk === 'cetak-cd') {
                unitPrice = parseInt(document.getElementById('cd-tipe').value);
                productFullName = 'Cetak Label CD/DVD';
                specText = document.getElementById('cd-tipe').options[document.getElementById('cd-tipe').selectedIndex].text.split('(')[0].trim();
            } else {
                unitPrice = 0;
                productFullName = 'Custom / Other';
                specText = "Silakan hubungi admin untuk detail harga dan spesifikasi.";
            }

            const subtotalRaw = unitPrice * qty;
            let discountRaw = 0;
            if (subtotalRaw >= 100000) {
                discountRaw = Math.floor(subtotalRaw / 100000) * 5000;
            }
            const grandTotalRaw = subtotalRaw - discountRaw;
            const dpAmountRaw = Math.ceil(grandTotalRaw / 2);

            // Format for display/WA
            const priceUnit = formatRupiah(unitPrice);
            const subtotal = formatRupiah(subtotalRaw);
            const discount = "-" + formatRupiah(discountRaw);
            const total = formatRupiah(grandTotalRaw);
            const dpAmountFormatted = formatRupiah(dpAmountRaw);

            // Detailed Note Assembly
            let eventDetails = '';
            if (produk === 'undangan' && document.getElementById('event-details-section').classList.contains('hidden') === false) {
                const jenisAcara = document.getElementById('jenis-acara').value;
                eventDetails += `\n*DETAIL ACARA*: `;
                if (jenisAcara === 'Pernikahan') {
                    eventDetails += `\n- Jenis: Pernikahan`;
                    eventDetails += `\n- Mempelai Pria: ${document.getElementById('nama-pria').value}`;
                    eventDetails += `\n- Mempelai Wanita: ${document.getElementById('nama-wanita').value}`;
                    eventDetails += `\n- Ortu: ${document.getElementById('nama-ortu').value}`;
                } else if (jenisAcara === 'Khitanan') {
                    eventDetails += `\n- Jenis: Khitanan`;
                    eventDetails += `\n- Nama Anak: ${document.getElementById('nama-anak').value}`;
                } else if (jenisAcara === 'Lainnya') {
                    eventDetails += `\n- Jenis: ${document.getElementById('judul-acara').value}`;
                }
            }


            // Simpan data ke global window untuk diakses oleh handler WA & Print
            window.orderData = {
                kode,
                nama,
                wa,
                qty,
                produk: productFullName,
                specs: specText,
                priceUnit,
                subtotal,
                discount,
                total,
                dpAmountFormatted,
                deadlineVal,
                today,
                discountRaw,
                note: noteRaw,
                eventDetails,
                dpAmountRaw,
                grandTotalRaw
            };


            // 1. Update Modal Content
            document.getElementById('inv-code').textContent = "#" + kode;
            document.getElementById('inv-date').textContent = today;
            document.getElementById('inv-name').textContent = nama;
            document.getElementById('inv-product').textContent = productFullName;
            document.getElementById('inv-specs').textContent = specText;
            document.getElementById('inv-price-unit').textContent = priceUnit.replace('Rp', '');
            document.getElementById('inv-qty').textContent = qty;
            
            if (discountRaw > 0) {
                document.getElementById('modal-discount-row').style.display = 'flex';
                document.getElementById('inv-discount').textContent = discount;
            } else {
                document.getElementById('modal-discount-row').style.display = 'none';
            }

            document.getElementById('inv-total-final').textContent = total;
            document.querySelector('.inv-total-label').textContent = "TOTAL TAGIHAN (Penuh)";
            document.getElementById('inv-notes-preview').textContent = noteRaw || 'Tidak ada catatan tambahan.';

            // Inject the DP/QRIS payment section dynamically
            let dpSection = document.getElementById('dp-payment-section');
            const dpPaymentHtml = `
                <div class="inv-payment-qris">
                    <h4>Pembayaran Uang Muka (DP) Otomatis</h4>
                    <div style="font-size: 1rem; color: #475569; font-weight: 600; margin-bottom: 5px;">Nominal Yang Perlu Dibayar (50%)</div>
                    <div class="inv-qris-nominal">
                        ${dpAmountFormatted}
                    </div>
                    <img src="https://i.imgur.com/YeK2AF2.jpeg" alt="QRIS Pembayaran" class="inv-qris-image">
                    <p class="inv-qris-info">
                        Nomor Invoice: <strong>#${kode}</strong> <br>Gunakan QRIS di atas atau transfer manual ke rekening admin.
                    </p>
                    <div class="inv-confirmation-note">
                        ‚ö†Ô∏è PENTING! Setelah transfer DP, Wajib Konfirmasi ke admin via WhatsApp dengan mengirimkan bukti pembayaran.
                    </div>
                </div>
            `;
            dpSection.innerHTML = dpPaymentHtml;

            // Tampilkan modal dan jalankan scroll otomatis
            modal.classList.add('active');
            animateScrollHint();
        });


        // --- 6. WHATSAPP CONFIRMATION HANDLER (FIXED) ---
        document.getElementById('btn-wa-konfirmasi').addEventListener('click', (e) => {
            e.preventDefault();
            const orderData = window.orderData;
            
            // FIX: Pastikan orderData tersedia sebelum membuat URL WA
            if (!orderData || !orderData.wa) {
                alert("Data pesanan belum tersedia. Silakan ulangi proses pemesanan.");
                return; 
            }
            
            const waText = ` *--- INVOICE PEMESANAN ANEKA DIGITAL ---* Kepada Yth. ${orderData.nama} 
No. Invoice: *#${orderData.kode}* Tanggal Pesan: ${orderData.today} 
Deadline: ${orderData.deadlineVal} 

*--- Rincian Pesanan ---* *Produk:* ${orderData.produk.toUpperCase()} 
*Spesifikasi:* ${orderData.specs} 
*Harga Satuan:* ${orderData.priceUnit.replace("Rp", "Rp ")} 
*Kuantitas:* ${orderData.qty} 
${orderData.discountRaw > 0 ? `*Diskon:* ${orderData.discount.replace("Rp", "-Rp ")}` : ''} 

*TOTAL AKHIR (Full):* ${orderData.total.replace("Rp", "Rp ")}
*Uang Muka (DP 50%):* ${orderData.dpAmountFormatted.replace("Rp", "Rp ")} 

${orderData.eventDetails}

*Catatan Tambahan:* ${orderData.note || '-'} 

Terima kasih. Kami akan segera memproses pesanan Anda setelah konfirmasi DP. 
`; 
            const phoneNumber = orderData.wa; // Nomor WA sudah di-format 62xxxxxxxxx
            const waUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(waText)}`; 
            
            // FIX: Arahkan ke WhatsApp
            window.open(waUrl, '_blank');
        });


        // --- 7. PRINT INVOICE HANDLER ---
        document.getElementById('btn-print-invoice').addEventListener('click', (e) => {
            e.preventDefault();
            const orderData = window.orderData;

            if (!orderData) {
                 alert("Data pesanan tidak ditemukan. Silakan proses pesanan terlebih dahulu.");
                return;
            }

            // CSS Khusus untuk Cetak/Print (Didefinisikan secara internal agar terisolasi dari CSS utama)
            const printStyles = `
                <style>
                    :root { --i-blue: #0A4D98; --i-orange: #FF7F00; --i-black: #1e293b; }
                    * { font-family: 'Inter', sans-serif; box-sizing: border-box; }
                    body { font-family: 'Inter', sans-serif; color: var(--i-black); margin: 0; padding: 0; background: white; font-size: 14px; }
                    .print-page { width: 100%; padding: 30px; /* Margin Kertas Aman */ box-sizing: border-box; max-width: 800px; /* Width aman untuk Letter/A4 */ margin: 0 auto; }
                    .header-section { text-align: center; padding-bottom: 20px; border-bottom: 3px solid var(--i-blue); margin-bottom: 20px; }
                    .header-section h1 { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 24px; color: var(--i-blue); margin: 0; line-height: 1.1; letter-spacing: 2px; }
                    .inv-number { font-size: 16px; font-weight: 700; color: var(--i-orange); background: #fff7ed; padding: 4px 10px; border-radius: 4px; display: inline-block; margin-top: 5px; border: 1px dashed #fed7aa; }
                    .client-info-section { display: flex; justify-content: space-between; margin-bottom: 30px; }
                    .client-box { width: 45%; }
                    .client-box h3 { font-size: 15px; font-weight: 700; color: var(--i-blue); margin-bottom: 10px; }
                    .client-box p { font-size: 13px; color: #475569; margin: 4px 0; }
                    .data-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
                    .data-table th, .data-table td { border: 1px solid #e2e8f0; padding: 10px; text-align: left; }
                    .data-table th { background: #f8fafc; font-size: 13px; color: #334155; font-weight: 700; }
                    .data-table td { font-size: 13px; color: #1e293b; }
                    .summary-section { width: 40%; margin-left: auto; margin-top: 20px; }
                    .summary-row { display: flex; justify-content: space-between; padding: 5px 0; }
                    .summary-row.total { border-top: 2px solid #e2e8f0; padding-top: 10px; margin-top: 10px; font-weight: 700; font-size: 16px; color: var(--i-blue); }
                    .print-dp-payment { text-align: center; border: 2px dashed #93c5fd; padding: 20px; border-radius: 8px; margin-top: 30px; background: #f0f9ff; }
                    .print-dp-payment h4 { color: var(--i-blue); margin: 0 0 10px 0; font-size: 15px; }
                    .print-nominal { font-size: 22px; font-weight: 800; color: var(--i-orange); margin-bottom: 15px; }
                    .print-qris-image { width: 150px; height: auto; border: 1px solid #ccc; border-radius: 4px; display: block; margin: 0 auto 15px auto; }
                    .print-warning { font-size: 11px; color: red; font-weight: 700; margin-top: 5px; }
                    /* Footer Print (Alamat) */
                    .print-footer-info { text-align: center; margin-top: 40px; padding-top: 10px; border-top: 1px solid #ccc; font-size: 11px; color: #475569; }
                </style>
            `;

            // HTML Konten Invoice untuk dicetak
            const printContent = `
                <!DOCTYPE html>
                <html lang="id">
                <head>
                    <meta charset="UTF-8">
                    <title>Invoice #${orderData.kode}</title>
                    ${printStyles}
                    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@700;800&family=Inter:wght@400;700&display=swap" rel="stylesheet">
                </head>
                <body>
                    <div class="print-page">
                        <div class="header-section">
                            <h1>ANEKA DIGITAL</h1>
                            <p style="font-size: 12px; color: #475569;">Pusat Cetak Undangan, ID Card & Foto Murah</p>
                            <span class="inv-number">INVOICE #${orderData.kode}</span>
                        </div>
                        
                        <div class="client-info-section">
                            <div class="client-box">
                                <h3>Data Pesanan</h3>
                                <p>Tanggal Pesan: ${orderData.today}</p>
                                <p>Deadline: ${orderData.deadlineVal}</p>
                                <p>Catatan: ${orderData.note || '-'}</p>
                            </div>
                            <div class="client-box">
                                <h3>Data Pelanggan</h3>
                                <p>Nama: ${orderData.nama}</p>
                                <p>WhatsApp: ${orderData.wa}</p>
                                <p>Invoice Code: ${orderData.kode}</p>
                            </div>
                        </div>

                        ${orderData.eventDetails ? `
                            <div class="client-info-section" style="border: 1px solid #e2e8f0; padding: 15px; border-radius: 8px;">
                                <div class="client-box" style="width: 100%;">
                                    <h3 style="margin-bottom: 5px;">${orderData.produk} Details</h3>
                                    ${orderData.eventDetails.replace(/\n/g, '<br>').replace(/\*/g, '').replace(/DETAIL ACARA:/, '')}
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;"></div>
                        ` : ''}


                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th style="width: 50%;">Produk & Spesifikasi</th>
                                    <th>Harga Satuan</th>
                                    <th style="width: 10%;">Qty</th>
                                    <th style="width: 20%; text-align: right;">Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div style="font-weight: 700; color: var(--i-blue);">${orderData.produk}</div>
                                        <div style="font-size: 11px;">${orderData.specs}</div>
                                    </td>
                                    <td>${orderData.priceUnit}</td>
                                    <td>${orderData.qty}</td>
                                    <td style="text-align: right;">${formatRupiah(orderData.grandTotalRaw + orderData.discountRaw)}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="summary-section">
                            <div class="summary-row">
                                <span>Total Belanja</span>
                                <span>${formatRupiah(orderData.grandTotalRaw + orderData.discountRaw)}</span>
                            </div>
                            ${orderData.discountRaw > 0 ? `
                            <div class="summary-row" style="color: var(--i-orange);">
                                <span>Diskon Volume</span>
                                <span>-${formatRupiah(orderData.discountRaw)}</span>
                            </div>
                            ` : ''}
                            <div class="summary-row total">
                                <span>TOTAL AKHIR</span>
                                <span>${orderData.total}</span>
                            </div>
                        </div>

                        <div class="print-dp-payment">
                            <h4>Pembayaran Uang Muka (DP) - 50%</h4>
                            <div class="print-nominal">${orderData.dpAmountFormatted}</div>
                            <img src="https://i.imgur.com/YeK2AF2.jpeg" alt="QRIS Pembayaran" class="print-qris-image">
                            <div class="print-warning">
                                MOHON SEGERA KONFIRMASI PEMBAYARAN DP INI KE ADMIN VIA WHATSAPP.
                            </div>
                        </div>
                        
                        <div class="print-footer-info">
                            Terima Kasih Telah Berbelanja.
                            <br>Jl. Pb. Sudirman, Panarukan, Situbondo ‚Ä¢ 0856-4770-9114
                        </div>

                    </div>
                </body>
                </html>
            `;

            const printContainer = document.getElementById('print-container');
            printContainer.innerHTML = printContent;
            
            // Jeda sedikit agar browser me-render font dan style sebelum print dialog muncul
            setTimeout(() => {
                window.print();
            }, 800);
        });

    </script>
</body>
</html>
