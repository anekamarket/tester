<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOTEL MANAGEMENT SYSTEM</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --hotel-primary: #0d47a1;
            --hotel-secondary: #b71c1c;
            --hotel-accent: #ff8f00;
            --hotel-light: #fff8e1;
            --hotel-dark: #3e2723;
            --hotel-gradient: linear-gradient(135deg, var(--hotel-primary), var(--hotel-secondary));
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--hotel-gradient);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--hotel-gradient);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
            color: white;
        }
        
        .section-title {
            border-left: 4px solid var(--hotel-primary);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--hotel-dark);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--hotel-gradient);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--hotel-gradient);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #2e7d32, #1b5e20);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ff8f00, #ef6c00);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--hotel-primary);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--hotel-primary);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--hotel-light);
            color: var(--hotel-dark);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--hotel-gradient);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--hotel-gradient);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--hotel-gradient);
            border-radius: 2px;
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--hotel-primary);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--hotel-primary);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--hotel-light);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--hotel-gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--hotel-gradient);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--hotel-gradient);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--hotel-primary);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--hotel-dark);
        }
        
        /* Responsive styles */
        @media (max-width: 991.98px) {
            .col-md-3.col-lg-2 {
                position: fixed;
                left: -300px;
                top: 0;
                bottom: 0;
                z-index: 1050;
                width: 280px;
                transition: left 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
            }
            
            .col-md-3.col-lg-2.mobile-show {
                left: 0;
            }
            
            .col-md-9.col-lg-10 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.mobile-show {
                display: block;
            }
        }
        
        /* Print Styles */
        @media print {
            @page {
                size: portrait;
                margin: 0.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            .invoice-print, .invoice-print * {
                visibility: visible;
            }
            
            .invoice-print {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
            }
            
            .no-print {
                display: none !important;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }

        /* Room status indicators */
        .room-status {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .status-available {
            background-color: #28a745;
        }
        
        .status-occupied {
            background-color: #dc3545;
        }
        
        .status-maintenance {
            background-color: #ffc107;
        }
        
        .status-reserved {
            background-color: #17a2b8;
        }
        
        /* Custom checkbox */
        .form-check-input:checked {
            background-color: var(--hotel-primary);
            border-color: var(--hotel-primary);
        }
        
        /* Loading indicator */
        .loading-indicator {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--hotel-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loading-indicator" id="loadingIndicator">
        <div class="loading-spinner"></div>
    </div>
    
    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <div class="container-fluid app-container">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block bg-light p-0" id="sidebar">
                <div class="app-header d-md-none">
                    <div class="app-logo"><i class="fas fa-hotel"></i></div>
                    <h1 class="app-title">HOTEL MANAGEMENT</h1>
                    <p class="app-subtitle">Sistem Manajemen Hotel</p>
                </div>
                
                <div class="p-3 pt-4">
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-bs-target="dashboard">
                                <i class="fas fa-tachometer-alt feature-icon"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="reservation">
                                <i class="fas fa-calendar-check feature-icon"></i> Reservasi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="checkin">
                                <i class="fas fa-sign-in-alt feature-icon"></i> Check-In
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="checkout">
                                <i class="fas fa-sign-out-alt feature-icon"></i> Check-Out
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="rooms">
                                <i class="fas fa-bed feature-icon"></i> Kamar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="guests">
                                <i class="fas fa-users feature-icon"></i> Tamu
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="reports">
                                <i class="fas fa-chart-bar feature-icon"></i> Laporan
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-target="settings">
                                <i class="fas fa-cog feature-icon"></i> Pengaturan
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="position-absolute bottom-0 start-0 end-0 p-3 bg-light border-top">
                    <div class="d-flex align-items-center">
                        <img src="https://ui-avatars.com/api/?name=Admin&background=0D47A1&color=fff" alt="Admin" class="rounded-circle me-2" width="40" height="40">
                        <div>
                            <small class="d-block text-muted">Administrator</small>
                            <small class="d-block text-primary">admin@hotel.com</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 p-4">
                <!-- Dashboard Section -->
                <div class="content-section" id="dashboard">
                    <h2 class="section-title">Dashboard</h2>
                    
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="stats-box">
                                <i class="fas fa-users fa-2x text-primary"></i>
                                <div class="stats-number" id="totalGuests">0</div>
                                <div class="stats-label">Total Tamu</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-box">
                                <i class="fas fa-bed fa-2x text-success"></i>
                                <div class="stats-number" id="availableRooms">0</div>
                                <div class="stats-label">Kamar Tersedia</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-box">
                                <i class="fas fa-calendar-check fa-2x text-warning"></i>
                                <div class="stats-number" id="todayCheckins">0</div>
                                <div class="stats-label">Check-In Hari Ini</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-box">
                                <i class="fas fa-sign-out-alt fa-2x text-danger"></i>
                                <div class="stats-number" id="todayCheckouts">0</div>
                                <div class="stats-label">Check-Out Hari Ini</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-chart-line me-2"></i> Statistik Penghasilan Bulanan
                                </div>
                                <div class="card-body">
                                    <canvas id="revenueChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-bed me-2"></i> Status Kamar
                                </div>
                                <div class="card-body">
                                    <canvas id="roomStatusChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-list me-2"></i> Reservasi Terbaru
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Nama Tamu</th>
                                                    <th>Kamar</th>
                                                    <th>Check-In</th>
                                                    <th>Check-Out</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody id="recentReservations">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reservation Section -->
                <div class="content-section d-none" id="reservation">
                    <h2 class="section-title">Reservasi Kamar</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-plus-circle me-2"></i> Form Reservasi Baru
                                </div>
                                <div class="card-body">
                                    <form id="reservationForm">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="guestName" class="form-label"><i class="fas fa-user"></i> Nama Tamu</label>
                                                <input type="text" class="form-control" id="guestName" required>
                                                <div class="error-message" id="guestNameError">Nama tamu harus diisi</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="guestPhone" class="form-label"><i class="fas fa-phone"></i> Telepon</label>
                                                <input type="tel" class="form-control" id="guestPhone" required>
                                                <div class="error-message" id="guestPhoneError">Nomor telepon harus diisi</div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="checkInDate" class="form-label"><i class="fas fa-calendar-alt"></i> Check-In</label>
                                                <input type="date" class="form-control" id="checkInDate" required>
                                                <div class="error-message" id="checkInDateError">Tanggal check-in harus diisi</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="checkOutDate" class="form-label"><i class="fas fa-calendar-alt"></i> Check-Out</label>
                                                <input type="date" class="form-control" id="checkOutDate" required>
                                                <div class="error-message" id="checkOutDateError">Tanggal check-out harus diisi</div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="roomType" class="form-label"><i class="fas fa-bed"></i> Tipe Kamar</label>
                                                <select class="form-select" id="roomType" required>
                                                    <option value="">Pilih Tipe Kamar</option>
                                                    <option value="standard">Standard</option>
                                                    <option value="deluxe">Deluxe</option>
                                                    <option value="suite">Suite</option>
                                                    <option value="executive">Executive</option>
                                                </select>
                                                <div class="error-message" id="roomTypeError">Tipe kamar harus dipilih</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="roomNumber" class="form-label"><i class="fas fa-door-open"></i> Nomor Kamar</label>
                                                <select class="form-select" id="roomNumber" required>
                                                    <option value="">Pilih Nomor Kamar</option>
                                                    <!-- Options will be populated by JavaScript -->
                                                </select>
                                                <div class="error-message" id="roomNumberError">Nomor kamar harus dipilih</div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="specialRequests" class="form-label"><i class="fas fa-concierge-bell"></i> Permintaan Khusus</label>
                                            <textarea class="form-control" id="specialRequests" rows="2"></textarea>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i> Simpan Reservasi
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-list me-2"></i> Daftar Reservasi
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Nama Tamu</th>
                                                    <th>Kamar</th>
                                                    <th>Check-In</th>
                                                    <th>Check-Out</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="reservationsList">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Check-In Section -->
                <div class="content-section d-none" id="checkin">
                    <h2 class="section-title">Check-In Tamu</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-sign-in-alt me-2"></i> Proses Check-In
                                </div>
                                <div class="card-body">
                                    <form id="checkinForm">
                                        <div class="mb-3">
                                            <label for="reservationSelect" class="form-label"><i class="fas fa-list"></i> Pilih Reservasi</label>
                                            <select class="form-select" id="reservationSelect" required>
                                                <option value="">Pilih Reservasi</option>
                                                <!-- Options will be populated by JavaScript -->
                                            </select>
                                            <div class="error-message" id="reservationSelectError">Reservasi harus dipilih</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="paymentMethod" class="form-label"><i class="fas fa-credit-card"></i> Metode Pembayaran</label>
                                            <select class="form-select" id="paymentMethod" required>
                                                <option value="">Pilih Metode Pembayaran</option>
                                                <option value="cash">Tunai</option>
                                                <option value="credit_card">Kartu Kredit</option>
                                                <option value="debit_card">Kartu Debit</option>
                                                <option value="transfer">Transfer Bank</option>
                                            </select>
                                            <div class="error-message" id="paymentMethodError">Metode pembayaran harus dipilih</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="idDocument" class="form-label"><i class="fas fa-id-card"></i> Dokumen Identitas</label>
                                            <input type="text" class="form-control" id="idDocument" placeholder="No. KTP/Passpor" required>
                                            <div class="error-message" id="idDocumentError">Dokumen identitas harus diisi</div>
                                        </div>
                                        
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="termsAgreement" required>
                                            <label class="form-check-label" for="termsAgreement">
                                                Saya menyetujui syarat dan ketentuan yang berlaku
                                            </label>
                                            <div class="error-message" id="termsAgreementError">Anda harus menyetujui syarat dan ketentuan</div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-check-circle me-2"></i> Proses Check-In
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-users me-2"></i> Tamu Sedang Menginap
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>Nama Tamu</th>
                                                    <th>Kamar</th>
                                                    <th>Check-In</th>
                                                    <th>Check-Out</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="currentGuestsList">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Check-Out Section -->
                <div class="content-section d-none" id="checkout">
                    <h2 class="section-title">Check-Out Tamu</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-sign-out-alt me-2"></i> Proses Check-Out
                                </div>
                                <div class="card-body">
                                    <form id="checkoutForm">
                                        <div class="mb-3">
                                            <label for="guestSelect" class="form-label"><i class="fas fa-user"></i> Pilih Tamu</label>
                                            <select class="form-select" id="guestSelect" required>
                                                <option value="">Pilih Tamu</option>
                                                <!-- Options will be populated by JavaScript -->
                                            </select>
                                            <div class="error-message" id="guestSelectError">Tamu harus dipilih</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-money-bill-wave"></i> Total Biaya</label>
                                            <div class="form-control" id="totalCharge">Rp 0</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-receipt"></i> Rincian Biaya</label>
                                            <div id="chargeDetails">
                                                <div class="d-flex justify-content-between">
                                                    <span>Biaya Kamar:</span>
                                                    <span id="roomCharge">Rp 0</span>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                    <span>Layanan Tambahan:</span>
                                                    <span id="additionalCharges">Rp 0</span>
                                                </div>
                                                <hr>
                                                <div class="d-flex justify-content-between fw-bold">
                                                    <span>Total:</span>
                                                    <span id="finalTotal">Rp 0</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="paymentStatus" class="form-label"><i class="fas fa-credit-card"></i> Status Pembayaran</label>
                                            <select class="form-select" id="paymentStatus" required>
                                                <option value="paid">Lunas</option>
                                                <option value="pending">Menunggu Pembayaran</option>
                                            </select>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-file-invoice-dollar me-2"></i> Proses Check-Out
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-history me-2"></i> Riwayat Check-Out
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>Nama Tamu</th>
                                                    <th>Kamar</th>
                                                    <th>Check-In</th>
                                                    <th>Check-Out</th>
                                                    <th>Total</th>
                                                </tr>
                                            </thead>
                                            <tbody id="checkoutHistoryList">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rooms Section -->
                <div class="content-section d-none" id="rooms">
                    <h2 class="section-title">Manajemen Kamar</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-plus-circle me-2"></i> Tambah Kamar Baru
                                </div>
                                <div class="card-body">
                                    <form id="roomForm">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="newRoomNumber" class="form-label"><i class="fas fa-door-open"></i> Nomor Kamar</label>
                                                <input type="text" class="form-control" id="newRoomNumber" required>
                                                <div class="error-message" id="newRoomNumberError">Nomor kamar harus diisi</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="newRoomType" class="form-label"><i class="fas fa-bed"></i> Tipe Kamar</label>
                                                <select class="form-select" id="newRoomType" required>
                                                    <option value="">Pilih Tipe Kamar</option>
                                                    <option value="standard">Standard</option>
                                                    <option value="deluxe">Deluxe</option>
                                                    <option value="suite">Suite</option>
                                                    <option value="executive">Executive</option>
                                                </select>
                                                <div class="error-message" id="newRoomTypeError">Tipe kamar harus dipilih</div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="roomPrice" class="form-label"><i class="fas fa-tag"></i> Harga per Malam</label>
                                                <input type="number" class="form-control" id="roomPrice" required>
                                                <div class="error-message" id="roomPriceError">Harga harus diisi</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="roomCapacity" class="form-label"><i class="fas fa-user-friends"></i> Kapasitas</label>
                                                <select class="form-select" id="roomCapacity" required>
                                                    <option value="1">1 Orang</option>
                                                    <option value="2">2 Orang</option>
                                                    <option value="3">3 Orang</option>
                                                    <option value="4">4 Orang</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="roomFeatures" class="form-label"><i class="fas fa-list"></i> Fasilitas Kamar</label>
                                            <textarea class="form-control" id="roomFeatures" rows="2" placeholder="AC, TV, WiFi, Kamar Mandi Dalam, dll."></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="roomStatus" class="form-label"><i class="fas fa-info-circle"></i> Status</label>
                                            <select class="form-select" id="roomStatus" required>
                                                <option value="available">Tersedia</option>
                                                <option value="occupied">Terisi</option>
                                                <option value="maintenance">Perawatan</option>
                                                <option value="cleaning">Pembersihan</option>
                                            </select>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i> Simpan Kamar
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div>
                                        <i class="fas fa-list me-2"></i> Daftar Kamar
                                    </div>
                                    <div>
                                        <select class="form-select form-select-sm" id="roomFilter">
                                            <option value="all">Semua</option>
                                            <option value="available">Tersedia</option>
                                            <option value="occupied">Terisi</option>
                                            <option value="maintenance">Perawatan</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>No. Kamar</th>
                                                    <th>Tipe</th>
                                                    <th>Harga</th>
                                                    <th>Status</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="roomsList">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Guests Section -->
                <div class="content-section d-none" id="guests">
                    <h2 class="section-title">Manajemen Tamu</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-user-plus me-2"></i> Tambah Tamu Baru
                                </div>
                                <div class="card-body">
                                    <form id="guestForm">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="newGuestName" class="form-label"><i class="fas fa-user"></i> Nama Lengkap</label>
                                                <input type="text" class="form-control" id="newGuestName" required>
                                                <div class="error-message" id="newGuestNameError">Nama tamu harus diisi</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="newGuestPhone" class="form-label"><i class="fas fa-phone"></i> Telepon</label>
                                                <input type="tel" class="form-control" id="newGuestPhone" required>
                                                <div class="error-message" id="newGuestPhoneError">Nomor telepon harus diisi</div>
                                            </div>
                                        </div>
                                        
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="newGuestEmail" class="form-label"><i class="fas fa-envelope"></i> Email</label>
                                                <input type="email" class="form-control" id="newGuestEmail">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="newGuestId" class="form-label"><i class="fas fa-id-card"></i> No. Identitas</label>
                                                <input type="text" class="form-control" id="newGuestId" required>
                                                <div class="error-message" id="newGuestIdError">Nomor identitas harus diisi</div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="newGuestAddress" class="form-label"><i class="fas fa-home"></i> Alamat</label>
                                            <textarea class="form-control" id="newGuestAddress" rows="2" required></textarea>
                                            <div class="error-message" id="newGuestAddressError">Alamat harus diisi</div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i> Simpan Data Tamu
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-users me-2"></i> Daftar Tamu
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <input type="text" class="form-control" id="guestSearch" placeholder="Cari tamu...">
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>Nama</th>
                                                    <th>Telepon</th>
                                                    <th>Email</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="guestsList">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reports Section -->
                <div class="content-section d-none" id="reports">
                    <h2 class="section-title">Laporan dan Analisis</h2>
                    
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-filter me-2"></i> Filter Laporan
                                </div>
                                <div class="card-body">
                                    <form id="reportFilterForm">
                                        <div class="mb-3">
                                            <label for="reportType" class="form-label">Jenis Laporan</label>
                                            <select class="form-select" id="reportType">
                                                <option value="occupancy">Tingkat Okupansi</option>
                                                <option value="revenue">Pendapatan</option>
                                                <option value="guests">Data Tamu</option>
                                                <option value="reservations">Reservasi</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="dateRange" class="form-label">Periode</label>
                                            <select class="form-select" id="dateRange">
                                                <option value="today">Hari Ini</option>
                                                <option value="week">Minggu Ini</option>
                                                <option value="month">Bulan Ini</option>
                                                <option value="quarter">Kuartal Ini</option>
                                                <option value="year">Tahun Ini</option>
                                                <option value="custom">Kustom</option>
                                            </select>
                                        </div>
                                        
                                        <div class="row mb-3 d-none" id="customDateRange">
                                            <div class="col-md-6">
                                                <label for="startDate" class="form-label">Dari Tanggal</label>
                                                <input type="date" class="form-control" id="startDate">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="endDate" class="form-label">Sampai Tanggal</label>
                                                <input type="date" class="form-control" id="endDate">
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-chart-line me-2"></i> Tampilkan Laporan
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-chart-bar me-2"></i> Grafik Laporan
                                </div>
                                <div class="card-body">
                                    <canvas id="reportChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <div>
                                        <i class="fas fa-table me-2"></i> Data Laporan
                                    </div>
                                    <div>
                                        <button class="btn btn-sm btn-success me-2" id="exportExcel">
                                            <i class="fas fa-file-excel me-1"></i> Excel
                                        </button>
                                        <button class="btn btn-sm btn-danger" id="exportPDF">
                                            <i class="fas fa-file-pdf me-1"></i> PDF
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>Tanggal</th>
                                                    <th>Pendapatan</th>
                                                    <th>Jumlah Tamu</th>
                                                    <th>Okupansi</th>
                                                    <th>Rata-Rata Lama Menginap</th>
                                                </tr>
                                            </thead>
                                            <tbody id="reportData">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Section -->
                <div class="content-section d-none" id="settings">
                    <h2 class="section-title">Pengaturan Sistem</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-cog me-2"></i> Pengaturan Umum
                                </div>
                                <div class="card-body">
                                    <form id="generalSettingsForm">
                                        <div class="mb-3">
                                            <label for="hotelName" class="form-label">Nama Hotel</label>
                                            <input type="text" class="form-control" id="hotelName" value="Grand Hotel">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="hotelAddress" class="form-label">Alamat Hotel</label>
                                            <textarea class="form-control" id="hotelAddress" rows="2">Jl. Contoh No. 123, Jakarta</textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="hotelPhone" class="form-label">Telepon Hotel</label>
                                            <input type="text" class="form-control" id="hotelPhone" value="+62 21 12345678">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="hotelEmail" class="form-label">Email Hotel</label>
                                            <input type="email" class="form-control" id="hotelEmail" value="info@grandhotel.com">
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i> Simpan Pengaturan
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-money-bill-wave me-2"></i> Pengaturan Tarif
                                </div>
                                <div class="card-body">
                                    <form id="pricingSettingsForm">
                                        <div class="mb-3">
                                            <label for="standardPrice" class="form-label">Harga Kamar Standard</label>
                                            <input type="number" class="form-control" id="standardPrice" value="350000">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="deluxePrice" class="form-label">Harga Kamar Deluxe</label>
                                            <input type="number" class="form-control" id="deluxePrice" value="500000">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="suitePrice" class="form-label">Harga Kamar Suite</label>
                                            <input type="number" class="form-control" id="suitePrice" value="750000">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="executivePrice" class="form-label">Harga Kamar Executive</label>
                                            <input type="number" class="form-control" id="executivePrice" value="1000000">
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save me-2"></i> Simpan Pengaturan
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-database me-2"></i> Manajemen Data
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="d-grid gap-2">
                                                <button class="btn btn-success mb-2" id="backupData">
                                                    <i class="fas fa-download me-2"></i> Backup Data
                                                </button>
                                                <button class="btn btn-warning mb-2" id="restoreData">
                                                    <i class="fas fa-upload me-2"></i> Restore Data
                                                </button>
                                                <button class="btn btn-danger mb-2" id="resetData">
                                                    <i class="fas fa-trash-alt me-2"></i> Reset Data
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div class="alert alert-info">
                                                <i class="fas fa-info-circle me-2"></i> 
                                                <strong>Informasi:</strong> Lakukan backup data secara berkala untuk mencegah kehilangan data. 
                                                Reset data akan menghapus semua data dan mengembalikan pengaturan ke kondisi awal.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2023 Hotel Management System - Dibuat dengan <i class="fas fa-heart text-danger"></i> oleh Tim Pengembang
        </div>
    </div>
    
    <div class="floating-action-btn no-print" id="scrollToTop">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <div class="notification-toast toast" role="alert" aria-live="assertive" aria-atomic="true" id="notificationToast">
        <div class="toast-header">
            <i class="fas fa-info-circle text-primary me-2" id="toastIcon"></i>
            <strong class="me-auto" id="toastTitle">Notification</strong>
            <small id="toastTime">Just now</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage">
            Operation completed successfully.
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // Initialize the application when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize all components
            initApp();
        });
        
        function initApp() {
            // Initialize sidebar navigation
            initNavigation();
            
            // Initialize all forms
            initForms();
            
            // Load initial data
            loadInitialData();
            
            // Initialize charts
            initCharts();
            
            // Set up event listeners
            setupEventListeners();
            
            // Show dashboard by default
            showSection('dashboard');
        }
        
        function initNavigation() {
            // Sidebar navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('data-bs-target');
                    
                    // Update active state
                    navLinks.forEach(navLink => navLink.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show the target section
                    showSection(target);
                    
                    // Hide mobile sidebar after click
                    document.getElementById('sidebar').classList.remove('mobile-show');
                    document.getElementById('sidebarOverlay').classList.remove('mobile-show');
                });
            });
            
            // Mobile menu toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('mobile-show');
                document.getElementById('sidebarOverlay').classList.toggle('mobile-show');
            });
            
            // Close sidebar when clicking on overlay
            document.getElementById('sidebarOverlay').addEventListener('click', function() {
                document.getElementById('sidebar').classList.remove('mobile-show');
                this.classList.remove('mobile-show');
            });
            
            // Scroll to top button
            document.getElementById('scrollToTop').addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
        
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.add('d-none'));
            
            // Show the requested section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('d-none');
                
                // Load section-specific data
                switch(sectionId) {
                    case 'dashboard':
                        updateDashboard();
                        break;
                    case 'reservation':
                        loadReservations();
                        populateRoomNumbers();
                        break;
                    case 'checkin':
                        loadReservationsForCheckin();
                        loadCurrentGuests();
                        break;
                    case 'checkout':
                        loadGuestsForCheckout();
                        loadCheckoutHistory();
                        break;
                    case 'rooms':
                        loadRooms();
                        break;
                    case 'guests':
                        loadGuests();
                        break;
                    case 'reports':
                        generateReport();
                        break;
                }
            }
        }
        
        function initForms() {
            // Initialize form validation and submission
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleFormSubmit(this.id);
                });
            });
            
            // Initialize date inputs
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                // Set default value to today
                if (!input.value) {
                    const today = new Date().toISOString().split('T')[0];
                    input.value = today;
                }
            });
            
            // Room type change event for reservation form
            document.getElementById('roomType').addEventListener('change', function() {
                populateRoomNumbers();
            });
            
            // Guest selection change event for checkout form
            document.getElementById('guestSelect').addEventListener('change', function() {
                updateChargeDetails(this.value);
            });
            
            // Date range change event for reports
            document.getElementById('dateRange').addEventListener('change', function() {
                const customRange = document.getElementById('customDateRange');
                if (this.value === 'custom') {
                    customRange.classList.remove('d-none');
                } else {
                    customRange.classList.add('d-none');
                }
            });
            
            // Room filter change event
            document.getElementById('roomFilter').addEventListener('change', function() {
                loadRooms();
            });
            
            // Guest search functionality
            document.getElementById('guestSearch').addEventListener('input', function() {
                filterGuests(this.value);
            });
            
            // Export buttons for reports
            document.getElementById('exportExcel').addEventListener('click', function() {
                exportToExcel();
            });
            
            document.getElementById('exportPDF').addEventListener('click', function() {
                exportToPDF();
            });
            
            // Data management buttons
            document.getElementById('backupData').addEventListener('click', function() {
                backupData();
            });
            
            document.getElementById('restoreData').addEventListener('click', function() {
                restoreData();
            });
            
            document.getElementById('resetData').addEventListener('click', function() {
                resetData();
            });
        }
        
        function setupEventListeners() {
            // Window scroll event for scroll-to-top button
            window.addEventListener('scroll', function() {
                const scrollBtn = document.getElementById('scrollToTop');
                if (window.scrollY > 300) {
                    scrollBtn.style.display = 'flex';
                } else {
                    scrollBtn.style.display = 'none';
                }
            });
            
            // Check-in and check-out date validation
            const checkInDate = document.getElementById('checkInDate');
            const checkOutDate = document.getElementById('checkOutDate');
            
            if (checkInDate && checkOutDate) {
                checkInDate.addEventListener('change', function() {
                    const checkIn = new Date(this.value);
                    const checkOut = new Date(checkOutDate.value);
                    
                    if (checkOut <= checkIn) {
                        checkOutDate.value = new Date(checkIn.setDate(checkIn.getDate() + 1)).toISOString().split('T')[0];
                    }
                });
                
                checkOutDate.addEventListener('change', function() {
                    const checkIn = new Date(checkInDate.value);
                    const checkOut = new Date(this.value);
                    
                    if (checkOut <= checkIn) {
                        showNotification('Error', 'Tanggal check-out harus setelah tanggal check-in', 'error');
                        this.value = new Date(checkIn.setDate(checkIn.getDate() + 1)).toISOString().split('T')[0];
                    }
                });
            }
        }
        
        function handleFormSubmit(formId) {
            showLoading(true);
            
            // Validate form
            if (!validateForm(formId)) {
                showLoading(false);
                return;
            }
            
            // Process form based on ID
            switch(formId) {
                case 'reservationForm':
                    saveReservation();
                    break;
                case 'checkinForm':
                    processCheckin();
                    break;
                case 'checkoutForm':
                    processCheckout();
                    break;
                case 'roomForm':
                    saveRoom();
                    break;
                case 'guestForm':
                    saveGuest();
                    break;
                case 'reportFilterForm':
                    generateReport();
                    break;
                case 'generalSettingsForm':
                    saveGeneralSettings();
                    break;
                case 'pricingSettingsForm':
                    savePricingSettings();
                    break;
                default:
                    console.log('Form ID not recognized:', formId);
                    showLoading(false);
            }
        }
        
        function validateForm(formId) {
            const form = document.getElementById(formId);
            const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                const errorElement = document.getElementById(input.id + 'Error');
                
                if (!input.value.trim()) {
                    input.classList.add('input-error');
                    if (errorElement) errorElement.style.display = 'block';
                    isValid = false;
                } else {
                    input.classList.remove('input-error');
                    if (errorElement) errorElement.style.display = 'none';
                }
                
                // Special validation for email
                if (input.type === 'email' && input.value) {
                    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailPattern.test(input.value)) {
                        input.classList.add('input-error');
                        if (errorElement) {
                            errorElement.textContent = 'Format email tidak valid';
                            errorElement.style.display = 'block';
                        }
                        isValid = false;
                    }
                }
                
                // Special validation for phone number
                if (input.id.includes('Phone') && input.value) {
                    const phonePattern = /^[0-9+\-\s()]{10,}$/;
                    if (!phonePattern.test(input.value)) {
                        input.classList.add('input-error');
                        if (errorElement) {
                            errorElement.textContent = 'Format telepon tidak valid';
                            errorElement.style.display = 'block';
                        }
                        isValid = false;
                    }
                }
            });
            
            // Special validation for checkboxes
            const checkboxes = form.querySelectorAll('input[type="checkbox"][required]');
            checkboxes.forEach(checkbox => {
                const errorElement = document.getElementById(checkbox.id + 'Error');
                
                if (!checkbox.checked) {
                    if (errorElement) errorElement.style.display = 'block';
                    isValid = false;
                } else {
                    if (errorElement) errorElement.style.display = 'none';
                }
            });
            
            return isValid;
        }
        
        function showLoading(show) {
            const loadingIndicator = document.getElementById('loadingIndicator');
            if (show) {
                loadingIndicator.style.display = 'flex';
            } else {
                setTimeout(() => {
                    loadingIndicator.style.display = 'none';
                }, 500);
            }
        }
        
        function showNotification(title, message, type = 'success') {
            const toast = document.getElementById('notificationToast');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = document.getElementById('toastIcon');
            const toastTime = document.getElementById('toastTime');
            
            // Set content based on type
            toastTitle.textContent = title;
            toastMessage.textContent = message;
            toastTime.textContent = new Date().toLocaleTimeString();
            
            // Set icon and color based on type
            switch(type) {
                case 'success':
                    toastIcon.className = 'fas fa-check-circle text-success me-2';
                    break;
                case 'error':
                    toastIcon.className = 'fas fa-exclamation-circle text-danger me-2';
                    break;
                case 'warning':
                    toastIcon.className = 'fas fa-exclamation-triangle text-warning me-2';
                    break;
                case 'info':
                    toastIcon.className = 'fas fa-info-circle text-primary me-2';
                    break;
            }
            
            // Show the toast
            const bootstrapToast = new bootstrap.Toast(toast);
            bootstrapToast.show();
        }
        
        // Data storage functions
        function getData(key) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : [];
        }
        
        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }
        
        // Initialize with sample data if empty
        function initializeSampleData() {
            // Sample rooms
            if (getData('rooms').length === 0) {
                const sampleRooms = [
                    { id: 1, number: '101', type: 'standard', price: 350000, capacity: 2, features: 'AC, TV, WiFi, Kamar Mandi Dalam', status: 'available' },
                    { id: 2, number: '102', type: 'standard', price: 350000, capacity: 2, features: 'AC, TV, WiFi, Kamar Mandi Dalam', status: 'available' },
                    { id: 3, number: '201', type: 'deluxe', price: 500000, capacity: 2, features: 'AC, TV, WiFi, Kamar Mandi Dalam, Bathub', status: 'available' },
                    { id: 4, number: '202', type: 'deluxe', price: 500000, capacity: 2, features: 'AC, TV, WiFi, Kamar Mandi Dalam, Bathub', status: 'available' },
                    { id: 5, number: '301', type: 'suite', price: 750000, capacity: 3, features: 'AC, TV, WiFi, Kamar Mandi Dalam, Bathub, Living Area', status: 'available' },
                    { id: 6, number: '302', type: 'suite', price: 750000, capacity: 3, features: 'AC, TV, WiFi, Kamar Mandi Dalam, Bathub, Living Area', status: 'maintenance' },
                    { id: 7, number: '401', type: 'executive', price: 1000000, capacity: 4, features: 'AC, TV, WiFi, Kamar Mandi Dalam, Bathub, Living Area, Kitchenette', status: 'available' }
                ];
                saveData('rooms', sampleRooms);
            }
            
            // Sample guests
            if (getData('guests').length === 0) {
                const sampleGuests = [
                    { id: 1, name: 'Budi Santoso', phone: '081234567890', email: 'budi@example.com', idNumber: '1234567890123456', address: 'Jl. Merdeka No. 123, Jakarta' },
                    { id: 2, name: 'Siti Rahayu', phone: '081298765432', email: 'siti@example.com', idNumber: '6543210987654321', address: 'Jl. Sudirman No. 456, Bandung' },
                    { id: 3, name: 'Ahmad Wijaya', phone: '081112223333', email: 'ahmad@example.com', idNumber: '1122334455667788', address: 'Jl. Gatot Subroto No. 789, Surabaya' }
                ];
                saveData('guests', sampleGuests);
            }
            
            // Sample reservations
            if (getData('reservations').length === 0) {
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                const nextWeek = new Date(today);
                nextWeek.setDate(nextWeek.getDate() + 7);
                
                const sampleReservations = [
                    { 
                        id: 1, 
                        guestId: 1, 
                        roomId: 1, 
                        checkIn: today.toISOString().split('T')[0], 
                        checkOut: tomorrow.toISOString().split('T')[0], 
                        status: 'checked-in',
                        specialRequests: 'Tambah bantal',
                        paymentMethod: 'credit_card',
                        idDocument: '1234567890123456'
                    },
                    { 
                        id: 2, 
                        guestId: 2, 
                        roomId: 3, 
                        checkIn: today.toISOString().split('T')[0], 
                        checkOut: nextWeek.toISOString().split('T')[0], 
                        status: 'reserved',
                        specialRequests: 'Kamar jauh dari lift',
                        paymentMethod: '',
                        idDocument: ''
                    }
                ];
                saveData('reservations', sampleReservations);
            }
            
            // Sample checkouts
            if (getData('checkouts').length === 0) {
                const lastWeek = new Date();
                lastWeek.setDate(lastWeek.getDate() - 7);
                
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                const sampleCheckouts = [
                    { 
                        id: 1, 
                        guestId: 3, 
                        roomId: 2, 
                        checkIn: lastWeek.toISOString().split('T')[0], 
                        checkOut: yesterday.toISOString().split('T')[0], 
                        totalCharge: 2450000,
                        paymentStatus: 'paid'
                    }
                ];
                saveData('checkouts', sampleCheckouts);
            }
        }
        
        function loadInitialData() {
            initializeSampleData();
            updateDashboard();
        }
        
        function updateDashboard() {
            const guests = getData('guests');
            const rooms = getData('rooms');
            const reservations = getData('reservations');
            const checkouts = getData('checkouts');
            
            // Update stats
            document.getElementById('totalGuests').textContent = guests.length;
            document.getElementById('availableRooms').textContent = rooms.filter(room => room.status === 'available').length;
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('todayCheckins').textContent = reservations.filter(res => res.checkIn === today && res.status === 'checked-in').length;
            document.getElementById('todayCheckouts').textContent = checkouts.filter(co => co.checkOut === today).length;
            
            // Load recent reservations
            loadRecentReservations();
        }
        
        function loadRecentReservations() {
            const reservations = getData('reservations');
            const guests = getData('guests');
            const rooms = getData('rooms');
            
            const recentReservations = reservations.slice(0, 5); // Get latest 5 reservations
            
            const tbody = document.getElementById('recentReservations');
            tbody.innerHTML = '';
            
            recentReservations.forEach(res => {
                const guest = guests.find(g => g.id === res.guestId);
                const room = rooms.find(r => r.id === res.roomId);
                
                if (guest && room) {
                    const row = document.createElement('tr');
                    
                    // Format status badge
                    let statusBadge = '';
                    switch(res.status) {
                        case 'reserved':
                            statusBadge = '<span class="badge bg-warning">Reserved</span>';
                            break;
                        case 'checked-in':
                            statusBadge = '<span class="badge bg-success">Checked-In</span>';
                            break;
                        case 'checked-out':
                            statusBadge = '<span class="badge bg-info">Checked-Out</span>';
                            break;
                        case 'cancelled':
                            statusBadge = '<span class="badge bg-danger">Cancelled</span>';
                            break;
                    }
                    
                    row.innerHTML = `
                        <td>${res.id}</td>
                        <td>${guest.name}</td>
                        <td>${room.number} (${room.type})</td>
                        <td>${formatDate(res.checkIn)}</td>
                        <td>${formatDate(res.checkOut)}</td>
                        <td>${statusBadge}</td>
                    `;
                    
                    tbody.appendChild(row);
                }
            });
        }
        
        // Reservation functions
        function saveReservation() {
            const guestName = document.getElementById('guestName').value;
            const guestPhone = document.getElementById('guestPhone').value;
            const checkInDate = document.getElementById('checkInDate').value;
            const checkOutDate = document.getElementById('checkOutDate').value;
            const roomType = document.getElementById('roomType').value;
            const roomNumber = document.getElementById('roomNumber').value;
            const specialRequests = document.getElementById('specialRequests').value;
            
            // Get existing data
            const guests = getData('guests');
            const rooms = getData('rooms');
            const reservations = getData('reservations');
            
            // Check if guest exists, if not create new guest
            let guest = guests.find(g => g.phone === guestPhone);
            if (!guest) {
                const newGuestId = guests.length > 0 ? Math.max(...guests.map(g => g.id)) + 1 : 1;
                guest = {
                    id: newGuestId,
                    name: guestName,
                    phone: guestPhone,
                    email: '',
                    idNumber: '',
                    address: ''
                };
                guests.push(guest);
                saveData('guests', guests);
            }
            
            // Find the selected room
            const selectedRoom = rooms.find(r => r.number === roomNumber && r.type === roomType);
            if (!selectedRoom) {
                showNotification('Error', 'Kamar tidak ditemukan', 'error');
                showLoading(false);
                return;
            }
            
            // Check if room is available
            if (selectedRoom.status !== 'available') {
                showNotification('Error', 'Kamar tidak tersedia', 'error');
                showLoading(false);
                return;
            }
            
            // Create new reservation
            const newReservationId = reservations.length > 0 ? Math.max(...reservations.map(r => r.id)) + 1 : 1;
            const newReservation = {
                id: newReservationId,
                guestId: guest.id,
                roomId: selectedRoom.id,
                checkIn: checkInDate,
                checkOut: checkOutDate,
                status: 'reserved',
                specialRequests: specialRequests,
                paymentMethod: '',
                idDocument: ''
            };
            
            // Update room status
            selectedRoom.status = 'reserved';
            saveData('rooms', rooms);
            
            // Save reservation
            reservations.push(newReservation);
            saveData('reservations', reservations);
            
            // Reset form
            document.getElementById('reservationForm').reset();
            
            // Update UI
            loadReservations();
            updateDashboard();
            
            showNotification('Sukses', 'Reservasi berhasil disimpan', 'success');
            showLoading(false);
        }
        
        function loadReservations() {
            const reservations = getData('reservations');
            const guests = getData('guests');
            const rooms = getData('rooms');
            
            const tbody = document.getElementById('reservationsList');
            tbody.innerHTML = '';
            
            reservations.forEach(res => {
                const guest = guests.find(g => g.id === res.guestId);
                const room = rooms.find(r => r.id === res.roomId);
                
                if (guest && room) {
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${res.id}</td>
                        <td>${guest.name}</td>
                        <td>${room.number} (${room.type})</td>
                        <td>${formatDate(res.checkIn)}</td>
                        <td>${formatDate(res.checkOut)}</td>
                        <td>
                            <button class="btn btn-sm btn-info me-1" onclick="viewReservation(${res.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-warning me-1" onclick="editReservation(${res.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="cancelReservation(${res.id})">
                                <i class="fas fa-times"></i>
                            </button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                }
            });
        }
        
        function populateRoomNumbers() {
            const roomType = document.getElementById('roomType').value;
            const roomSelect = document.getElementById('roomNumber');
            
            // Clear existing options
            roomSelect.innerHTML = '<option value="">Pilih Nomor Kamar</option>';
            
            if (!roomType) {
                return;
            }
            
            // Get available rooms of selected type
            const rooms = getData('rooms');
            const availableRooms = rooms.filter(room => room.type === roomType && room.status === 'available');
            
            if (availableRooms.length === 0) {
                roomSelect.innerHTML = '<option value="">Tidak ada kamar tersedia</option>';
                return;
            }
            
            // Add available rooms to select
            availableRooms.forEach(room => {
                const option = document.createElement('option');
                option.value = room.number;
                option.textContent = `${room.number} (Rp ${room.price.toLocaleString()}/malam)`;
                roomSelect.appendChild(option);
            });
        }
        
        // Check-in functions
        function loadReservationsForCheckin() {
            const reservations = getData('reservations');
            const guests = getData('guests');
            
            const select = document.getElementById('reservationSelect');
            select.innerHTML = '<option value="">Pilih Reservasi</option>';
            
            // Filter reservations that are reserved (not checked-in)
            const reserved = reservations.filter(res => res.status === 'reserved');
            
            reserved.forEach(res => {
                const guest = guests.find(g => g.id === res.guestId);
                if (guest) {
                    const option = document.createElement('option');
                    option.value = res.id;
                    option.textContent = `${guest.name} (Check-in: ${formatDate(res.checkIn)})`;
                    select.appendChild(option);
                }
            });
        }
        
        function processCheckin() {
            const reservationId = parseInt(document.getElementById('reservationSelect').value);
            const paymentMethod = document.getElementById('paymentMethod').value;
            const idDocument = document.getElementById('idDocument').value;
            
            if (!reservationId) {
                showNotification('Error', 'Pilih reservasi terlebih dahulu', 'error');
                showLoading(false);
                return;
            }
            
            // Get data
            const reservations = getData('reservations');
            const rooms = getData('rooms');
            
            // Find reservation
            const reservation = reservations.find(r => r.id === reservationId);
            if (!reservation) {
                showNotification('Error', 'Reservasi tidak ditemukan', 'error');
                showLoading(false);
                return;
            }
            
            // Update reservation
            reservation.status = 'checked-in';
            reservation.paymentMethod = paymentMethod;
            reservation.idDocument = idDocument;
            
            // Update room status
            const room = rooms.find(r => r.id === reservation.roomId);
            if (room) {
                room.status = 'occupied';
            }
            
            // Save data
            saveData('reservations', reservations);
            saveData('rooms', rooms);
            
            // Reset form
            document.getElementById('checkinForm').reset();
            
            // Update UI
            loadReservationsForCheckin();
            loadCurrentGuests();
            updateDashboard();
            
            showNotification('Sukses', 'Check-in berhasil diproses', 'success');
            showLoading(false);
        }
        
        function loadCurrentGuests() {
            const reservations = getData('reservations');
            const guests = getData('guests');
            const rooms = getData('rooms');
            
            const tbody = document.getElementById('currentGuestsList');
            tbody.innerHTML = '';
            
            // Filter checked-in guests
            const checkedIn = reservations.filter(res => res.status === 'checked-in');
            
            checkedIn.forEach(res => {
                const guest = guests.find(g => g.id === res.guestId);
                const room = rooms.find(r => r.id === res.roomId);
                
                if (guest && room) {
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td>${guest.name}</td>
                        <td>${room.number}</td>
                        <td>${formatDate(res.checkIn)}</td>
                        <td>${formatDate(res.checkOut)}</td>
                        <td>
                            <button class="btn btn-sm btn-info" onclick="viewGuestDetails(${guest.id})">
                                <i class="fas fa-user"></i>
                            </button>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                }
            });
        }
        
        // Check-out functions
        function loadGuestsForCheckout() {
            const reservations = getData('reservations');
            const guests = getData('guests');
            
            const select = document.getElementById('guestSelect');
            select.innerHTML = '<option value="">Pilih Tamu</option>';
            
            // Filter checked-in guests
            const checkedIn = reservations.filter(res => res.status === 'checked-in');
            
            checkedIn.forEach(res => {
                const guest = guests.find(g => g.id === res.guestId);
                if (guest) {
                    const option = document.createElement('option');
                    option.value = res.id;
                    option.textContent = `${guest.name} (Kamar: ${getRoomNumber(res.roomId)})`;
                    select.appendChild(option);
                }
            });
        }
        
        function updateChargeDetails(reservationId) {
            if (!reservationId) {
                document.getElementById('totalCharge').textContent = 'Rp 0';
                document.getElementById('roomCharge').textContent = 'Rp 0';
                document.getElementById('additionalCharges').textContent = 'Rp 0';
                document.getElementById('finalTotal').textContent = 'Rp 0';
                return;
            }
            
            // Get reservation and room details
            const reservations = getData('reservations');
            const rooms = getData('rooms');
            
            const reservation = reservations.find(r => r.id === parseInt(reservationId));
            if (!reservation) return;
            
            const room = rooms.find(r => r.id === reservation.roomId);
            if (!room) return;
            
            // Calculate number of nights
            const checkIn = new Date(reservation.checkIn);
            const checkOut = new Date(reservation.checkOut);
            const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));
            
            // Calculate room charge
            const roomCharge = room.price * nights;
            
            // For simplicity, additional charges are fixed at 10% of room charge
            const additionalCharges = roomCharge * 0.1;
            const totalCharge = roomCharge + additionalCharges;
            
            // Update UI
            document.getElementById('totalCharge').textContent = `Rp ${totalCharge.toLocaleString()}`;
            document.getElementById('roomCharge').textContent = `Rp ${roomCharge.toLocaleString()}`;
            document.getElementById('additionalCharges').textContent = `Rp ${additionalCharges.toLocaleString()}`;
            document.getElementById('finalTotal').textContent = `Rp ${totalCharge.toLocaleString()}`;
        }
        
        function processCheckout() {
            const reservationId = parseInt(document.getElementById('guestSelect').value);
            const paymentStatus = document.getElementById('paymentStatus').value;
            
            if (!reservationId) {
                showNotification('Error', 'Pilih tamu terlebih dahulu', 'error');
                showLoading(false);
                return;
            }
            
            // Get data
            const reservations = getData('reservations');
            const rooms = getData('rooms');
            const checkouts = getData('checkouts');
            
            // Find reservation
            const reservation = reservations.find(r => r.id === reservationId);
            if (!reservation) {
                showNotification('Error', 'Reservasi tidak ditemukan', 'error');
                showLoading(false);
                return;
            }
            
            // Find room
            const room = rooms.find(r => r.id === reservation.roomId);
            if (!room) {
                showNotification('Error', 'Kamar tidak ditemukan', 'error');
                showLoading(false);
                return;
            }
            
            // Calculate charges
            const checkIn = new Date(reservation.checkIn);
            const checkOut = new Date(); // Current date as check-out date
            const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));
            const roomCharge = room.price * nights;
            const additionalCharges = roomCharge * 0.1;
            const totalCharge = roomCharge + additionalCharges;
            
            // Create checkout record
            const newCheckoutId = checkouts.length > 0 ? Math.max(...checkouts.map(c => c.id)) + 1 : 1;
            const checkoutRecord = {
                id: newCheckoutId,
                guestId: reservation.guestId,
                roomId: reservation.roomId,
                checkIn: reservation.checkIn,
                checkOut: checkOut.toISOString().split('T')[0],
                totalCharge: totalCharge,
                paymentStatus: paymentStatus
            };
            
            // Update reservation status
            reservation.status = 'checked-out';
            
            // Update room status
            room.status = 'cleaning';
            
            // Save data
            saveData('reservations', reservations);
            saveData('rooms', rooms);
            checkouts.push(checkoutRecord);
            saveData('checkouts', checkouts);
            
            // Reset form
            document.getElementById('checkoutForm').reset();
            
            // Update UI
            loadGuestsForCheckout();
            loadCheckoutHistory();
            updateDashboard();
            
            showNotification('Sukses', 'Check-out berhasil diproses', 'success');
            showLoading(false);
        }
        
        function loadCheckoutHistory() {
            const checkouts = getData('checkouts');
            const guests = getData('guests');
            const rooms = getData('rooms');
            
            const tbody = document.getElementById('checkoutHistoryList');
            tbody.innerHTML = '';
            
            checkouts.forEach(co => {
                const guest = guests.find(g => g.id === co.guestId);
                const room = rooms.find(r => r.id === co.roomId);
                
                if (guest && room) {
                    const row = document.createElement('tr');
                    
                    // Format payment status
                    const paymentStatus = co.paymentStatus === 'paid' ? 
                        '<span class="badge bg-success">Lunas</span>' : 
                        '<span class="badge bg-warning">Pending</span>';
                    
                    row.innerHTML = `
                        <td>${guest.name}</td>
                        <td>${room.number}</td>
                        <td>${formatDate(co.checkIn)}</td>
                        <td>${formatDate(co.checkOut)}</td>
                        <td>Rp ${co.totalCharge.toLocaleString()}</td>
                    `;
                    
                    tbody.appendChild(row);
                }
            });
        }
        
        // Room management functions
        function saveRoom() {
            const roomNumber = document.getElementById('newRoomNumber').value;
            const roomType = document.getElementById('newRoomType').value;
            const roomPrice = parseInt(document.getElementById('roomPrice').value);
            const roomCapacity = document.getElementById('roomCapacity').value;
            const roomFeatures = document.getElementById('roomFeatures').value;
            const roomStatus = document.getElementById('roomStatus').value;
            
            // Get existing rooms
            const rooms = getData('rooms');
            
            // Check if room number already exists
            if (rooms.some(room => room.number === roomNumber)) {
                showNotification('Error', 'Nomor kamar sudah ada', 'error');
                showLoading(false);
                return;
            }
            
            // Create new room
            const newRoomId = rooms.length > 0 ? Math.max(...rooms.map(r => r.id)) + 1 : 1;
            const newRoom = {
                id: newRoomId,
                number: roomNumber,
                type: roomType,
                price: roomPrice,
                capacity: parseInt(roomCapacity),
                features: roomFeatures,
                status: roomStatus
            };
            
            // Save room
            rooms.push(newRoom);
            saveData('rooms', rooms);
            
            // Reset form
            document.getElementById('roomForm').reset();
            
            // Update UI
            loadRooms();
            updateDashboard();
            
            showNotification('Sukses', 'Kamar berhasil disimpan', 'success');
            showLoading(false);
        }
        
        function loadRooms() {
            const rooms = getData('rooms');
            const filter = document.getElementById('roomFilter').value;
            
            // Filter rooms if needed
            let filteredRooms = rooms;
            if (filter !== 'all') {
                filteredRooms = rooms.filter(room => room.status === filter);
            }
            
            const tbody = document.getElementById('roomsList');
            tbody.innerHTML = '';
            
            filteredRooms.forEach(room => {
                const row = document.createElement('tr');
                
                // Format status badge
                let statusBadge = '';
                switch(room.status) {
                    case 'available':
                        statusBadge = '<span class="badge bg-success">Tersedia</span>';
                        break;
                    case 'occupied':
                        statusBadge = '<span class="badge bg-danger">Terisi</span>';
                        break;
                    case 'maintenance':
                        statusBadge = '<span class="badge bg-warning">Perawatan</span>';
                        break;
                    case 'cleaning':
                        statusBadge = '<span class="badge bg-info">Pembersihan</span>';
                        break;
                    case 'reserved':
                        statusBadge = '<span class="badge bg-primary">Dipesan</span>';
                        break;
                }
                
                row.innerHTML = `
                    <td>${room.number}</td>
                    <td>${room.type}</td>
                    <td>Rp ${room.price.toLocaleString()}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm btn-info me-1" onclick="viewRoom(${room.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-warning me-1" onclick="editRoom(${room.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteRoom(${room.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        // Guest management functions
        function saveGuest() {
            const guestName = document.getElementById('newGuestName').value;
            const guestPhone = document.getElementById('newGuestPhone').value;
            const guestEmail = document.getElementById('newGuestEmail').value;
            const guestId = document.getElementById('newGuestId').value;
            const guestAddress = document.getElementById('newGuestAddress').value;
            
            // Get existing guests
            const guests = getData('guests');
            
            // Check if phone number already exists
            if (guests.some(guest => guest.phone === guestPhone)) {
                showNotification('Error', 'Nomor telepon sudah terdaftar', 'error');
                showLoading(false);
                return;
            }
            
            // Check if ID number already exists
            if (guests.some(guest => guest.idNumber === guestId)) {
                showNotification('Error', 'Nomor identitas sudah terdaftar', 'error');
                showLoading(false);
                return;
            }
            
            // Create new guest
            const newGuestId = guests.length > 0 ? Math.max(...guests.map(g => g.id)) + 1 : 1;
            const newGuest = {
                id: newGuestId,
                name: guestName,
                phone: guestPhone,
                email: guestEmail,
                idNumber: guestId,
                address: guestAddress
            };
            
            // Save guest
            guests.push(newGuest);
            saveData('guests', guests);
            
            // Reset form
            document.getElementById('guestForm').reset();
            
            // Update UI
            loadGuests();
            updateDashboard();
            
            showNotification('Sukses', 'Data tamu berhasil disimpan', 'success');
            showLoading(false);
        }
        
        function loadGuests() {
            const guests = getData('guests');
            
            const tbody = document.getElementById('guestsList');
            tbody.innerHTML = '';
            
            guests.forEach(guest => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${guest.name}</td>
                    <td>${guest.phone}</td>
                    <td>${guest.email}</td>
                    <td>
                        <button class="btn btn-sm btn-info me-1" onclick="viewGuestDetails(${guest.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-warning me-1" onclick="editGuest(${guest.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteGuest(${guest.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        function filterGuests(query) {
            const guests = getData('guests');
            const tbody = document.getElementById('guestsList');
            tbody.innerHTML = '';
            
            const filteredGuests = guests.filter(guest => 
                guest.name.toLowerCase().includes(query.toLowerCase()) ||
                guest.phone.includes(query) ||
                guest.email.toLowerCase().includes(query.toLowerCase())
            );
            
            filteredGuests.forEach(guest => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${guest.name}</td>
                    <td>${guest.phone}</td>
                    <td>${guest.email}</td>
                    <td>
                        <button class="btn btn-sm btn-info me-1" onclick="viewGuestDetails(${guest.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-warning me-1" onclick="editGuest(${guest.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteGuest(${guest.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        // Report functions
        function generateReport() {
            // For demo purposes, we'll generate sample report data
            const reportData = [
                { date: '2023-10-01', revenue: 3500000, guests: 12, occupancy: '75%', avgStay: '2.5' },
                { date: '2023-10-02', revenue: 4200000, guests: 15, occupancy: '80%', avgStay: '2.8' },
                { date: '2023-10-03', revenue: 3800000, guests: 14, occupancy: '78%', avgStay: '2.6' },
                { date: '2023-10-04', revenue: 4500000, guests: 16, occupancy: '85%', avgStay: '3.0' },
                { date: '2023-10-05', revenue: 5000000, guests: 18, occupancy: '90%', avgStay: '3.2' },
                { date: '2023-10-06', revenue: 5200000, guests: 20, occupancy: '95%', avgStay: '3.5' },
                { date: '2023-10-07', revenue: 4800000, guests: 17, occupancy: '88%', avgStay: '3.1' }
            ];
            
            // Populate report table
            const tbody = document.getElementById('reportData');
            tbody.innerHTML = '';
            
            reportData.forEach(data => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${formatDate(data.date)}</td>
                    <td>Rp ${data.revenue.toLocaleString()}</td>
                    <td>${data.guests}</td>
                    <td>${data.occupancy}</td>
                    <td>${data.avgStay} hari</td>
                `;
                
                tbody.appendChild(row);
            });
            
            // Update chart
            updateReportChart(reportData);
            
            showLoading(false);
        }
        
        function updateReportChart(data) {
            const ctx = document.getElementById('reportChart').getContext('2d');
            
            // Destroy previous chart if it exists
            if (window.reportChartInstance) {
                window.reportChartInstance.destroy();
            }
            
            // Create new chart
            window.reportChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.map(d => formatDate(d.date)),
                    datasets: [
                        {
                            label: 'Pendapatan (Rp)',
                            data: data.map(d => d.revenue),
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Jumlah Tamu',
                            data: data.map(d => d.guests),
                            backgroundColor: 'rgba(255, 99, 132, 0.5)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1,
                            type: 'line',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Pendapatan (Rp)'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false
                            },
                            title: {
                                display: true,
                                text: 'Jumlah Tamu'
                            }
                        }
                    }
                }
            });
        }
        
        function exportToExcel() {
            // For a real implementation, you would use a library like SheetJS
            showNotification('Info', 'Fitur ekspor Excel akan segera hadir', 'info');
        }
        
        function exportToPDF() {
            // For a real implementation, you would use jsPDF with autoTable
            showNotification('Info', 'Fitur ekspor PDF akan segera hadir', 'info');
        }
        
        // Settings functions
        function saveGeneralSettings() {
            const hotelName = document.getElementById('hotelName').value;
            const hotelAddress = document.getElementById('hotelAddress').value;
            const hotelPhone = document.getElementById('hotelPhone').value;
            const hotelEmail = document.getElementById('hotelEmail').value;
            
            // Save settings to localStorage
            const settings = {
                hotelName: hotelName,
                hotelAddress: hotelAddress,
                hotelPhone: hotelPhone,
                hotelEmail: hotelEmail
            };
            
            saveData('settings', settings);
            
            showNotification('Sukses', 'Pengaturan umum berhasil disimpan', 'success');
            showLoading(false);
        }
        
        function savePricingSettings() {
            const standardPrice = parseInt(document.getElementById('standardPrice').value);
            const deluxePrice = parseInt(document.getElementById('deluxePrice').value);
            const suitePrice = parseInt(document.getElementById('suitePrice').value);
            const executivePrice = parseInt(document.getElementById('executivePrice').value);
            
            // Save pricing to localStorage
            const pricing = {
                standard: standardPrice,
                deluxe: deluxePrice,
                suite: suitePrice,
                executive: executivePrice
            };
            
            saveData('pricing', pricing);
            
            showNotification('Sukses', 'Pengaturan tarif berhasil disimpan', 'success');
            showLoading(false);
        }
        
        function backupData() {
            // Create a blob of all data
            const data = {
                guests: getData('guests'),
                rooms: getData('rooms'),
                reservations: getData('reservations'),
                checkouts: getData('checkouts'),
                settings: getData('settings'),
                pricing: getData('pricing')
            };
            
            const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            // Create download link
            const a = document.createElement('a');
            a.href = url;
            a.download = `hotel-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Sukses', 'Backup data berhasil', 'success');
        }
        
        function restoreData() {
            // For a real implementation, you would create a file input and read the file
            showNotification('Info', 'Fitur restore data akan segera hadir', 'info');
        }
        
        function resetData() {
            if (confirm('Apakah Anda yakin ingin mereset semua data? Tindakan ini tidak dapat dibatalkan.')) {
                // Clear all data
                localStorage.removeItem('guests');
                localStorage.removeItem('rooms');
                localStorage.removeItem('reservations');
                localStorage.removeItem('checkouts');
                
                // Reinitialize with sample data
                initializeSampleData();
                
                // Update UI
                updateDashboard();
                if (document.getElementById('reservationsList')) loadReservations();
                if (document.getElementById('roomsList')) loadRooms();
                if (document.getElementById('guestsList')) loadGuests();
                
                showNotification('Sukses', 'Data berhasil direset', 'success');
            }
        }
        
        // Chart initialization
        function initCharts() {
            initRevenueChart();
            initRoomStatusChart();
        }
        
        function initRevenueChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            
            // Sample data for revenue chart
            const revenueData = {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Pendapatan (Juta Rupiah)',
                    data: [45, 52, 48, 58, 66, 60, 75, 80, 70, 85, 90, 95],
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            };
            
            new Chart(ctx, {
                type: 'line',
                data: revenueData,
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Pendapatan Bulanan'
                        },
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Juta Rupiah'
                            }
                        }
                    }
                }
            });
        }
        
        function initRoomStatusChart() {
            const ctx = document.getElementById('roomStatusChart').getContext('2d');
            const rooms = getData('rooms');
            
            // Count rooms by status
            const statusCount = {
                available: rooms.filter(r => r.status === 'available').length,
                occupied: rooms.filter(r => r.status === 'occupied').length,
                reserved: rooms.filter(r => r.status === 'reserved').length,
                maintenance: rooms.filter(r => r.status === 'maintenance').length,
                cleaning: rooms.filter(r => r.status === 'cleaning').length
            };
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Tersedia', 'Terisi', 'Dipesan', 'Perawatan', 'Pembersihan'],
                    datasets: [{
                        data: [
                            statusCount.available,
                            statusCount.occupied,
                            statusCount.reserved,
                            statusCount.maintenance,
                            statusCount.cleaning
                        ],
                        backgroundColor: [
                            'rgba(40, 167, 69, 0.8)',
                            'rgba(220, 53, 69, 0.8)',
                            'rgba(23, 162, 184, 0.8)',
                            'rgba(255, 193, 7, 0.8)',
                            'rgba(108, 117, 125, 0.8)'
                        ],
                        borderColor: [
                            'rgba(40, 167, 69, 1)',
                            'rgba(220, 53, 69, 1)',
                            'rgba(23, 162, 184, 1)',
                            'rgba(255, 193, 7, 1)',
                            'rgba(108, 117, 125, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        title: {
                            display: true,
                            text: 'Status Kamar'
                        }
                    }
                }
            });
        }
        
        // Utility functions
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('id-ID', options);
        }
        
        function getRoomNumber(roomId) {
            const rooms = getData('rooms');
            const room = rooms.find(r => r.id === roomId);
            return room ? room.number : 'N/A';
        }
        
        // Placeholder functions for future implementation
        function viewReservation(id) {
            showNotification('Info', `Melihat detail reservasi ${id}`, 'info');
        }
        
        function editReservation(id) {
            showNotification('Info', `Mengedit reservasi ${id}`, 'info');
        }
        
        function cancelReservation(id) {
            if (confirm('Apakah Anda yakin ingin membatalkan reservasi ini?')) {
                showNotification('Sukses', `Reservasi ${id} dibatalkan`, 'success');
            }
        }
        
        function viewGuestDetails(id) {
            showNotification('Info', `Melihat detail tamu ${id}`, 'info');
        }
        
        function editGuest(id) {
            showNotification('Info', `Mengedit data tamu ${id}`, 'info');
        }
        
        function deleteGuest(id) {
            if (confirm('Apakah Anda yakin ingin menghapus data tamu ini?')) {
                showNotification('Sukses', `Data tamu ${id} dihapus`, 'success');
            }
        }
        
        function viewRoom(id) {
            showNotification('Info', `Melihat detail kamar ${id}`, 'info');
        }
        
        function editRoom(id) {
            showNotification('Info', `Mengedit data kamar ${id}`, 'info');
        }
        
        function deleteRoom(id) {
            if (confirm('Apakah Anda yakin ingin menghapus data kamar ini?')) {
                showNotification('Sukses', `Data kamar ${id} dihapus`, 'success');
            }
        }
    </script>
</body>
</html>
